* Fixture: SocialRest

| standard-test-setup |

| Comment   | Global nav should show on workspace all pages            |
| GET       | /m/page/%%workspace%%/                                   |
| code-is   | 200                                                      |
| body-like | Replace this text with your own                          |
| body-like | Workspaces                                               |
| body-like | People                                                   |
| body-like | Signals                                                  |
| body-like | Log out                                                  |
| body-like | qr/href="\/m\/page\/%%workspace%%\/">%%workspace%%<\/a>/ |
| body-like | qr/href="\/m\/changes\/%%workspace%%\/">What's new<\/a>/ |
| body-like | qr/href="\/m\/search\/%%workspace%%\/">Search<\/a>/      |

| GET       | /m/workspace_list               |
| code-is   | 200                             |
| body-like | Workspaces                      |
| body-like | People                          |
| body-like | Signals                         |
| body-like | Log out                         |
| body-like | Hello, <b>%%email_address%%</b> |
| body-like | Workspaces you belong to:       |
| body-like | You have free access            |
| body-like | %%workspace%%                   |

| GET       | /m/changes/%%workspace%% |
| code-is   | 200                      |
| body-like | Workspaces               |
| body-like | People                   |
| body-like | Signals                  |
| body-like | Log out                  |
| body-like | Filter by category       |
| body-like | %%workspace%%            |

| Comment     | /lite/* should redirect to /m/* |                        |
| GET         | /lite/page/%%workspace%%/       |                        |
| code-is     | 302                             |                        |
| header-like | Location                        | /m/page/%%workspace%%/ |

| Comment     | /lite should redirect to /m/signals |            |
| GET         | /lite                               |            |
| code-is     | 302                                 |            |
| header-like | Location                            | /m/signals |
| GET         | /lite/                              |            |
| code-is     | 302                                 |            |
| header-like | Location                            | /m/signals |
| GET         | /m                                  |            |
| code-is     | 302                                 |            |
| header-like | Location                            | /m/signals |
| GET         | /m/                                 |            |
| code-is     | 302                                 |            |
| header-like | Location                            | /m/signals |

| Comment     | signals                  |                           |
| GET         | /m/signals               |                           |
| code-is     | 200                      |                           |
| body-like   | What are you working on? |                           |
| post-json   | /data/signals            | {"signal":"I can haz /m"} |
| code-is     | 201                      |                           |
| GET         | /m/signals               |                           |
| code-is     | 200                      |                           |
| body-like   | What are you working on? |                           |
| body-like   | I can haz /m             |                           |
| body-like   | Newer</span>             |                           |
| body-like   | Newest</span>            |                           |
| body-unlike | Older &gt;&gt;</a>       |                           |
| body-like   | Older &gt;&gt;</span>    |                           |
| body-like   | Refresh                  |                           |

| Comment     | Pagination               |                        |
| post-json   | /data/signals            | {"signal":"signal '1'"}  |
| post-json   | /data/signals            | {"signal":"signal '2'"}  |
| post-json   | /data/signals            | {"signal":"signal '3'"}  |
| post-json   | /data/signals            | {"signal":"signal '4'"}  |
| post-json   | /data/signals            | {"signal":"signal '5'"}  |
| post-json   | /data/signals            | {"signal":"signal '6'"}  |
| post-json   | /data/signals            | {"signal":"signal '7'"}  |
| post-json   | /data/signals            | {"signal":"signal '8'"}  |
| post-json   | /data/signals            | {"signal":"signal '9'"}  |
| post-json   | /data/signals            | {"signal":"signal '10'"} |
| post-json   | /data/signals            | {"signal":"signal '11'"} |
| post-json   | /data/signals            | {"signal":"signal '12'"} |
| post-json   | /data/signals            | {"signal":"signal '13'"} |
| post-json   | /data/signals            | {"signal":"signal '14'"} |
| post-json   | /data/signals            | {"signal":"signal '15'"} |
| post-json   | /data/signals            | {"signal":"signal '16'"} |
| post-json   | /data/signals            | {"signal":"signal '17'"} |
| post-json   | /data/signals            | {"signal":"signal '18'"} |
| post-json   | /data/signals            | {"signal":"signal '19'"} |
| post-json   | /data/signals            | {"signal":"signal '20'"} |
| post-json   | /data/signals            | {"signal":"signal '21'"} |

| GET         | /m/signals               |
| code-is     | 200                      |
| body-like   | What are you working on? |
| body-like   | signal '21'              |
| body-like   | signal '20'              |
| body-like   | signal '19'              |
| body-like   | signal '18'              |
| body-like   | signal '17'              |
| body-like   | signal '16'              |
| body-like   | signal '15'              |
| body-like   | signal '14'              |
| body-like   | signal '13'              |
| body-like   | signal '12'              |
| body-unlike | signal '11'              |
| body-unlike | signal '10'              |
| body-like   | Newer</span>             |
| body-like   | Newest</span>            |
| body-like   | Older &gt;&gt;</a>       |
| body-like   | Refresh                  |
| GET         | /m/signals/?page=1       |
| code-is     | 200                      |
| body-like   | What are you working on? |
| body-like   | signal '11'              |
| body-like   | signal '10'              |
| body-like   | signal '9'               |
| body-like   | signal '8'               |
| body-like   | signal '7'               |
| body-like   | signal '6'               |
| body-like   | signal '5'               |
| body-like   | signal '4'               |
| body-like   | signal '3'               |
| body-like   | signal '2'               |
| body-unlike | signal '1'               |
| body-like   | Newer</a>                |
| body-like   | Newest</a>               |
| body-like   | Older &gt;&gt;</a>       |
| body-like   | Refresh                  |

| Comment | Post a signal via miki |
| POST_form | /m/signals | signal=o%20hai |
| code-is | 200 |
| body-like | o hai |

| Comment     | Test the signals tabs         |
| GET         | /m/signals                    |
| code-is     | 200                           |
| body-unlike | >My Colleagues</a>            |
| body-like   | >My Colleagues</span>         |
| body-like   | >All</a>                      |
| body-like   | >Mine</a>                     |

| GET         | /m/signals/?all=1             |
| code-is     | 200                           |
| body-like   | >My Colleagues</a>            |
| body-unlike | >All</a>                      |
| body-like   | >All</span>                   |
| body-like   | >Mine</a>                     |

| GET         | /m/signals/?actor=%%user_id%% |
| code-is     | 200                           |
| body-like   | >My Colleagues</a>            |
| body-like   | >All</a>                      |
| body-unlike | >Mine</a>                     |
| body-like   | >Mine</span>                  |
