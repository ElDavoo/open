* Fixture: SocialRest

| standard-test-setup |

| GET_json  | /data/events/groups/999999 |
| code-is   | 404                        |
| body-like | not found                  |

| set          | g1     | g1-%%start_time%%             |
| create-group | %%g1%% |                               |
| set          | g1_id  | %%group_id%%                  |
| set          | g1_uri | /data/events/groups/%%g1_id%% |

* not authorized to see this group - 403

| GET_json | %%g1_uri%% |
| code-is  | 403        |

* group with no events

| set-business-admin | %%username%% | 1 |
| GET_json           | %%g1_uri%%   |   |
| code-is            | 200          |   |
| json-parse         |              |   |
| json-array-size    | 0            |   |

* user added to group

| set         | joey     | joey@%%start_time%%.ken.socialtext.net |
| create-user | %%joey%% | password                               |

| add-user-to-group | %%joey%%    | %%g1_id%% |
| GET_json          | %%g1_uri%%  |           |
| code-is           | 200         |           |
| json-parse        |             |           |
| json-array-size   | 1           |           |
| body-like         | System User |           |
| body-like | "group":{"name":"%%g1%%","id":"%%g1_id%%","uri":"/?group/%%g1_id%%"} |

| GET     | %%g1_uri%% | text/plain |
| code-is | 200        |            |
| body-like | System User (less than a minute ago) added joey to the group %%g1%% |

* user removed from group

| remove-user-from-group | %%joey%% | %%g1_id%% |
| GET_json          | %%g1_uri%%  |           |
| code-is           | 200         |           |
| json-parse        |             |           |
| json-array-size   | 2           |           |

| GET     | %%g1_uri%% | text/plain |
| code-is | 200        |            |
| body-like | System User (less than a minute ago) removed joey from the group %%g1%% |

* group added to workspace

| add-group-to-workspace | %%g1_id%% | %%workspace%% |
| GET_json          | %%g1_uri%%  |           |
| code-is           | 200         |           |
| json-parse        |             |           |
| json-array-size   | 3           |           |

| GET     | %%g1_uri%% | text/plain |
| code-is | 200        |            |
| body-like | User (less than a minute ago) added %%g1%% to the workspace %%workspace%% |

* group removed from workspace


| remove-group-from-workspace | %%g1_id%% | %%workspace%% |
| GET_json          | %%g1_uri%%  |           |
| code-is           | 200         |           |
| json-parse        |             |           |
| json-array-size   | 4           |           |

| GET     | %%g1_uri%% | text/plain |
| code-is | 200        |            |
| body-like | User (less than a minute ago) removed %%g1%% from the workspace %%workspace%% |

Later on ...
* group details changed
* adding group to an account
* removing group from an account

