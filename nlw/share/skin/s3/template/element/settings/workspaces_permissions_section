[%# vim: set et sts=2 sw=2: %]
[%# @COPYRIGHT@ -%]
[% PROCESS element/settings/start %]

<dl class="form">
  <dt><label>[% loc('Workspace Privacy') %]</label></dt>
  <dd>
    [% loc('Workspaces are private by default. All users need to log in to view pages. Only workspace admins can invite new users.') %] 
  </dd>
  [% IF current_permission_set_name == "member-only" %]
    <p>[% loc('If you need public workspaces that can be viewed by users without logging in, please contact <a href="[_1]">Socialtext Support</a>.', support_address) %]</p>
  [% ELSE %]
  <dt><label>[% loc('Do you want to set up this workspace as:') %]</label></dt>
  <dd>
    <input type="radio" name="permission_set_name" value="member-only" />
    <strong>[% loc('Private') %]</strong> - [% loc('users need to be invited by an admin and must log in to see pages.') %]
  </dd>
  <dd>
    <input type="radio" name="permission_set_name" checked="checked" value="not-member-only" />
    <strong>[% loc('Public') %]</strong> - [% loc('users can see pages without logging in.') %]
  </dd>
  [% END %]

  <dt><label>[% loc('Who can send email to this workspace?') %]</label></dt>
  <dd>
    <input type="radio" name="guest_has_email_in" [% IF fill_in_data.guest_has_email_in %]checked="1"[% END %] value="1" />
    [% loc('Anyone can send email to this workspace.') %]
  </dd>
  <dd>
    <input type="radio" name="guest_has_email_in" [% UNLESS fill_in_data.guest_has_email_in %]checked="1"[% END %] value="0" />
    [% SET people_role = permission_set_name.match('public-(?:read|comment)-only') ? loc('workspace members') : loc('registered users') %]
    [% loc('Only [_1] can send email to this workspace.', people_role ) %] 
  </dd>
  <dt><label>[% loc('Page Locking') %]</label></dt>
  <dd>
    <input type="radio" id="settings-lock-pages" name="allows_page_locking" [% IF fill_in_data.allows_page_locking %]checked="1"[% END %] value="1" />
    [% loc('Enable page locking. A workspace administrator can choose to lock any page, and only admins will be able to edit the locked page. Use carefully, since workspaces gain more participation if members can easily edit pages.') %]
  </dd>
  <dd>
    <input type="radio" id="settings-unlock-pages" name="allows_page_locking" [% UNLESS fill_in_data.allows_page_locking %]checked="1"[% END %] value="0" />
    [% loc('Disable page locking. Any member who can edit pages can edit any page. If any pages were previously locked, those pages will be unlocked.') %]
  </dd>
</dl>

[% PROCESS element/settings/stop %]
