| *Comment* | Test Case: Control Paenl Create Group |  |

| set | email1 | group-1-%%start_time%%@ken.socialtext.com |
| create_user | %%email1%% | %%password%% |
| set | user1 | %%user_id%% |
| set | email2 | group-2-%%start_time%%@ken.socialtext.com |
| create_user | %%email2%% | %%password%% |
| set | user2 | %%user_id%% |
| set | email3 | group-3-%%start_time%%@ken.socialtext.com |
| create_user | %%email3%% | %%password%% |
| set | user3 | %%user_id%% |
| set | email4 | group-4-%%start_time%%@ken.socialtext.com |
| create_user | %%email4%% | %%password%% |
| set | user4 | %%user_id%% |

| set | groupexists | group-%%start_time%% |
| create-group | %%groupexists%% |  |
| set | groupname | new-group-%%start_time%% |
| set | CPgroupname | group-%%start_time%% |

| *Comment* | Test Case: Control Panel Create Group - create group via groups UI |  |
| open_ok | nlw/control/group |  |
| wait_for_element_visible_ok | link=Create Group | 30000 |
| click_ok | link=Create Group |  |
| wait_for_element_visible_ok | st-groupname | 30000 |
| wait_for_element_visible_ok | st-group-create-submit | 30000 |
| type_ok | st-groupname | %%CPgroupname%% |
| click_ok | st-group-create-submit |  |
| wait_for_element_visible_ok | link=Add Group To An Account | 30000 |
| text_like | //body | Created By: %%username%% |
| text_like | //body | %%CPgroupname%% |
| text_like | //body | Users (0) |

| *Comment* | Test Case: Control Panel Create Group - create group via members |  |
| open_ok | /nlw/control/user |  |
| wait_for_element_visible_ok | username | 30000 |
| wait_for_element_visible_ok | st-username-search-submit | 30000 |
| type_ok | username | %%start_time%% |
| click_and_wait | st-username-search-submit |  |
| wait_for_element_visible_ok | %%user1%% | 30000 |
| click_ok | %%user1%% |  |
| wait_for_element_visible_ok | %%user2%% | 30000 |
| click_ok | %%user2%% |  |
| wait_for_element_visible_ok | %%user3%% | 30000 |
| click_ok | %%user3%% |  |
| wait_for_element_visible_ok | %%user4%% | 30000 |
| click_ok | %%user4%% |  |
| wait_for_element_visible_ok | link=Invite to Group(s) | 30000 |
| click_ok | link=Invite to Group(s) |
| wait_for_element_visible_ok | group-name | 30000 |
| wait_for_element_visible_ok | todo-create | 30000 |
| check_ok | todo-create |  |
| wait_for_element_visible_ok | group-name | 30000 |
| type_ok | group-name | %%groupname%% |
| wait_for_element_visible_ok | invite-button | 30000 |
| click_and_wait | invite-button |  |

| *Comment* | Test case: Control Panel Create Group Contains new members |  |
| text-like | //body | You successfully added 4 users to 1 group. |
| text-like | //body | Users (4) |
| text-like | //body | %%groupname%% |
| text-like | //body | Created By: %%username%% |
| wait_for_element_visible_ok | link=%%email1%% | 30000 |
| wait_for_element_visible_ok | link=%%email2%% | 30000 |
| wait_for_element_visible_ok | link=%%email3%% | 30000 |
| wait_for_element_visible_ok | link=%%email4%% | 30000 |

| *Comment* | Test Case: Control Panel Create Group - add members to existing group |  |
| open_ok | /nlw/control/user |  |
| wait_for_element_visible_ok | username | 30000 |
| wait_for_element_visible_ok | st-username-search-submit | 30000 |
| type_ok | username | %%start_time%% |
| click_and_wait | st-username-search-submit |  |
| wait_for_element_visible_ok | link=Clear Selection | 30000 |
| click_ok | link=Clear Selection |  |
| wait_for_element_visible_ok | link=0 users selected | 30000 |
| wait_for_element_visible_ok | %%user1%% | 30000 |
| click_ok | %%user1%% |  |
| wait_for_element_visible_ok | %%user2%% | 30000 |
| click_ok | %%user2%% |  |
| wait_for_element_visible_ok | %%user3%% | 30000 |
| click_ok | %%user3%% |  |
| wait_for_element_visible_ok | link=Invite to Group(s) | 30000 |
| click_ok | link=Invite to Group(s) |
| wait_for_element_visible_ok | group-name | 30000 |
| wait_for_element_visible_ok | todo-invite | 30000 |
| check_ok | todo-invite |  |
| wait_for_element_visible_ok | %%group_id%% | 30000 |
| click_ok | %%group_id%% | 30000 |
| wait_for_element_visible_ok | invite-button | 30000 |
| pause | 30000 |  |
| click_and_wait | invite-button |  |

* | wait_for_text_present_ok | You successfully added 3 users to 1 group | 30000 |

| *Comment* | Test Case: Control Panel Groups Confirm Add |  |
| pause | 9000 |  |
| open_ok | /nlw/control/group/%%group_id%% |  |
| text-like | //body | Users (3) |
| text-like | //body | %%groupexists%% |
| text-like | //body | Created By: %%username%% |
| wait_for_element_visible_ok | link=%%email1%% | 30000 |
| wait_for_element_visible_ok | link=%%email2%% | 30000 |
| wait_for_element_visible_ok | link=%%email3%% | 30000 |

| *Comment* | Test Case: Control Panel Create Group Teardown |
| delete_created_groups |  |

| *Comment* | Test case: Control Panel Create Group COMPLETED |  |
