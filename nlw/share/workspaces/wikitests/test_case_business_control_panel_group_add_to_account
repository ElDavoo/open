* Fixtures: Socialtext

| *Comment* | Test Case: Control Panel Group Add To Account |

| *Comment* | create needed objects |  |
| set | group | group%%start_time%% |
| set | account | account%%start_time%% |
| set | addl_account | new_account%%start_time%% |
| st-admin | create-account --name %%addl_account%% | was created |
| create-account | %%account%% |  |
| create-group | %%group%% | %%account%% |
| st_process_jobs |  |  |

| *Comment* | Test Case: Control Panel Group Add To Account Add second account to the group |  |
| st-admin | give-accounts-admin --e %%email%% | now has accounts admin access |
| open-ok | /nlw/control/group/%%group_id%% |  |
| wait_for_element_visible_ok | addToAccountLookahead | 3000 |
| type-lookahead-ok | addToAccountLookahead | %%addl_account%% |
| wait_for_element_visible_ok | link=%%addl_account%% |  |
| click_ok | link=%%addl_account%% |  |
| wait_for_text_present_ok | Accounts (2) | 30000 |
| text_like | //body | qr/%%account%%.+%%addl_account%%/ |
| refresh |  |  |
| wait_for_text_present_ok | Accounts (2) | 30000 |
| text_like | //body | qr/%%account%%.+%%addl_account%%/ |

| *Comment* | Test Case: Control Panel Group Add To Account Remove Account from group |  |
| wait_for_element_visible_ok | accountTable-select-1 | 30000 |
| click_ok | accountTable-select-1 |  |
| wait_for_element_visible_ok | //input[@type='button' and @value="Remove from account(s)"] | 30000 |
| click_ok | //input[@type='button' and @value="Remove from account(s)"] |  |
| wait_for_text_present_ok | Accounts (1) | 30000 |
| refresh |  |  |
| wait_for_text_present_ok | Accounts (1) | 30000 |
| text_unlike | //body | %%addl_account%% |

| *Comment* | Test Case: Control Panel Group Add To Account TEARDOWN |  |
| delete-group | %%group_id%% |  |
| st-admin | remove-accounts-admin --e %%email%% | no longer has accounts admin access |

| *Comment* | Test Case: Control Panel Group Add To Account COMPLETED |
