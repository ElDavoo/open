| *Comment* | Test Case: Business Control Panel Groups in Workspace |

| *Comment* | Test Case: Business Control Panel Groups in Workspace SETUP |

| standard-test-setup |  |
| st-admin | give-accounts-admin --username %%username%% |

| *Comment* | Test Case: Business Control Panel Groups in Workspace SETUP Create 4 groups with names out of order |  |  |
| set | group1 | groupa%%start_time%% |  |
| create-group | %%group1%% | %%account%% | %%username%% |
| set | group_id1 | %%group_id%% |  |
| set | group2 | groupc%%start_time%% |  |
| create-group | %%group2%% | %%account%% | %%username%% |
| set | group_id2 | %%group_id%% |  |
| set | group3 | groupb%%start_time%% |  |
| create-group | %%group3%% | %%account%% | %%username%% |
| set | group_id3 | %%group_id%% |  |
| set | group4 | groupd%%start_time%% |  |
| create-group | %%group4%% | %%account%% | %%username%% |
| set | group_id4 | %%group_id%% |  |
| set | group5 | groupe%%start_time%% |  |
| create-group | %%group5%% | %%account%% | %%username%% |
| set | group_id5 | %%group_id%% |  |
| add-group-to-workspace | %%group_id1%% | %%workspace%% |  |
| add-group-to-workspace | %%group_id2%% | %%workspace%% |  |
| add-group-to-workspace | %%group_id3%% | %%workspace%% |  |
| add-group-to-workspace | %%group_id4%% | %%workspace%% |  |
| set | curly | curly%%start_time%%@ken.socialtext.net |
| create-user | %%curly%% | password |  |
| add-user-to-group | %%curly%% | %%group_id1%% |  |
| add-user-to-group | %%curly%% | %%group_id2%% |  |
| add-user-to-group | %%curly%% | %%group_id3%% |  |
| add-user-to-group | %%curly%% | %%group_id4%% |  |

| *Comment* | Test Case: Business Control Panel Groups in Workspace Check for groups in workspace |  |
| open_ok | /nlw/control/workspace/%%workspace_id%% | 30000 |
| wait-for-text-present-ok | %%workspace%% workspace | 30000 |
| wait-for-text-present-ok | Groups (4) | 30000 |
| text_like | //body | qr/Group ID.+Name.+Users.+Workspaces.+Primary Account.+Created.+Creator.+Role/ism |

| set | escaped_user | user-%%start_time%%\@ken.socialtext.net |
| set | g1_match | %%group_id1%%.+%%group1%%.+1.+1.+%%account%%.+\d{4}-\d\d-\d\d.+%%escaped_user%%.+member |
| set | g2_match | %%group_id2%%.+%%group2%%.+1.+1.+%%account%%.+\d{4}-\d\d-\d\d.+%%escaped_user%%.+member |
| set | g3_match | %%group_id3%%.+%%group3%%.+1.+1.+%%account%%.+\d{4}-\d\d-\d\d.+%%escaped_user%%.+member |
| set | g4_match | %%group_id4%%.+%%group4%%.+1.+1.+%%account%%.+\d{4}-\d\d-\d\d.+%%escaped_user%%.+member |

| *Comment* | Test Case: Business Control Panel Groups in Workspace Sorting by name ascending should order groups 1 (a) 3 (b) 2 (c) 4 (d) |  |
| text_like | //body | qr/%%g1_match%%.+%%g3_match%%.+%%g2_match%%.+%%g4_match%%/sm |

| *Comment* | Test Case: Business Control Panel Groups in Workspace Sorting by name descending should order groups 1 (a) 3 (b) 2 (c) 4 (d) |  |
| click_and_wait | group-sort-name |  |
| text_like | //body | qr/%%g4_match%%.+%%g2_match%%.+%%g3_match%%.+%%g1_match%%/ism |

| *Comment* | Test Case: Business Control Panel Groups in Workspace Sorting by id descending should order groups 1 2 3 4 |  |
| click_and_wait | group-sort-id |  |
| text_like | //body | qr/%%g4_match%%.+%%g3_match%%.+%%g2_match%%.+%%g1_match%%/ism |

| *Comment* | Test Case: Business Control Panel Groups in Workspace Sorting by id ascending should order groups 1 2 3 4 |  |
| click_and_wait | group-sort-id |  |
| text_like | //body | qr/%%g1_match%%.+%%g2_match%%.+%%g3_match%%.+%%g4_match%%/ism |

| *Comment* | Test Case: Business Control Panel Groups in Workspace Verify Add Group |
| open_ok | /nlw/control/workspace/%%workspace_id%% |
| wait_for_element_present_ok | link=Add Group To Workspace | 30000 |
| click_and_wait | link=Add Group To Workspace |
| wait_for_element_visible_ok | group_id |

|
