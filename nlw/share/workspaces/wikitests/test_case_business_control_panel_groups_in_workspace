| *Comment* | Test Case: Business Control Panel Groups in Workspace |

| *Comment* | Test Case: Business Control Panel Groups in Workspace SETUP |  |
| set | ws | wscpgiw%%start_time%% |
| set | account | acctbcpgiw%%start_time%% |
| set | workspaceforadmin | wgiwadmin%%start_time%% |
| create-account | %%account%% |  |
| create-workspace | %%ws%% | %%account%% |
| st-admin | give-accounts-admin --username %%username%% |  |

| *Comment* | Test Case: Business Control Panel Groups in Workspace SETUP Create 4 groups with names out of order |  |  |
| set | group1 | groupa%%start_time%% |  |
| create-group | %%group1%% | %%account%% | %%username%% |
| set | group_id1 | %%group_id%% |  |
| set | group2 | groupc%%start_time%% |  |
| create-group | %%group2%% | %%account%% | %%username%% |
| set | group_id2 | %%group_id%% |  |
| set | group3 | groupb%%start_time%% |  |
| create-group | %%group3%% | %%account%% | %%username%% |
| set | group_id3 | %%group_id%% |  |
| set | group4 | groupd%%start_time%% |  |
| create-group | %%group4%% | %%account%% | %%username%% |
| set | group_id4 | %%group_id%% |  |
| set | group5 | groupe%%start_time%% |  |
| create-group | %%group5%% | %%account%% | %%username%% |
| set | group_id5 | %%group_id%% |  |
| add-group-to-workspace | %%group_id1%% | %%ws%% |  |
| add-group-to-workspace | %%group_id2%% | %%ws%% |  |
| add-group-to-workspace | %%group_id3%% | %%ws%% |  |
| add-group-to-workspace | %%group_id4%% | %%ws%% |  |
| set | curly | curly%%start_time%%@ken.socialtext.net |  |
| create-user | %%curly%% | password |  |
| add-user-to-group | %%curly%% | %%group_id1%% |  |
| add-user-to-group | %%curly%% | %%group_id2%% |  |
| add-user-to-group | %%curly%% | %%group_id3%% |  |
| add-user-to-group | %%curly%% | %%group_id4%% |  |

| *Comment* | Test Case: Business Control Panel Groups in Workspace Check for groups in workspace |  |
| open_ok | /nlw/control/workspace |  |
| wait_for_element_visible_ok | name | 30000 |
| type_ok | name | %%ws%% |
| st-submit |  |  |
| click_and_wait | link=%%ws%% |  |
| wait-for-text-present-ok | %%ws%% workspace | 30000 |
| wait-for-text-present-ok | Groups (4) | 30000 |
| text_like | //body | qr/Group ID.+Name.+Users.+Workspaces.+Primary Account.+Created.+Creator.*Role/ism |

| set | g1_match | %%group_id1%%.*%%group1%%.*1.*1.*%%account%%.*\d{4}-\d\d-\d\d.*member |
| set | g2_match | %%group_id2%%.*%%group2%%.*1.*1.*%%account%%.*\d{4}-\d\d-\d\d.*member |
| set | g3_match | %%group_id3%%.*%%group3%%.*1.*1.*%%account%%.*\d{4}-\d\d-\d\d.*member |
| set | g4_match | %%group_id4%%.*%%group4%%.*1.*1.*%%account%%.*\d{4}-\d\d-\d\d.*member |

| *Comment* | Test Case: Business Control Panel Groups in Workspace Sorting by name ascending should order groups 1 (a) 3 (b) 2 (c) 4 (d) |  |
| text_like | //body | qr/%%g1_match%%.+%%g3_match%%.+%%g2_match%%.+%%g4_match%%/sm |

| *Comment* | Test Case: Business Control Panel Groups in Workspace Sorting by name descending should order groups 1 (a) 3 (b) 2 (c) 4 (d) |  |
| click_and_wait | group-sort-name |  |
| text_like | //body | qr/%%g4_match%%.+%%g2_match%%.+%%g3_match%%.+%%g1_match%%/ism |

| *Comment* | Test Case: Business Control Panel Groups in Workspace Sorting by id ascending should order groups 1 2 3 4 |  |
| click_and_wait | group-sort-id |  |
| text_like | //body | qr/%%g1_match%%.+%%g2_match%%.+%%g3_match%%.+%%g4_match%%/ism |

| *Comment* | Test Case: Business Control Panel Groups in Workspace Sorting by id descending should order groups 4 3 2 1 |  |
| click_and_wait | group-sort-id |  |
| text_like | //body | qr/%%g4_match%%.+%%g3_match%%.+%%g2_match%%.+%%g1_match%%/ism |

| *Comment* | Test Case: Business Control Panel Groups in Workspace Verify Add Group Link |  |
| open_ok | /nlw/control/workspace |  |
| wait_for_element_visible_ok | name | 30000 |
| type_ok | name | %%ws%% |
| st-submit |  |  |
| click_and_wait | link=%%ws%% |  |
| wait_for_element_present_ok | link=Add Group To Workspace | 30000 |
| click_and_wait | link=Add Group To Workspace |  |
| wait_for_element_visible_ok | group_id | 30000 |

| *Comment* | Test Case: Business Control Panel Groups in Workspace Verify Add Group |

TODO: why does this TC end abruptly with a comment ?

| *Comment* | Test Case: Business Control Panel Groups in Workspace TEARDOWN |
| st-admin | delete-workspace --w %%ws%% --no-export | has been deleted |

| *Comment* | Test Case: Business Control Panel Groups in Workspace COMPLETED |
