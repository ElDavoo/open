| *Comment* | Test Case: Edit Summaries |  |  |
| set_default | pt | 6000 | summaries pop-up needs time for JS to load |

| *Comment* | Test Case: Edit Summaries - create a page from file, because we can't type newlines with type_ok |  |
| st-admin | update-page --workspace %%workspace%% --email %%email%% --page "Edit Summaries %%start_time%%" < %%wikitest_client_files%%wikitest_toc.txt | The "Edit Summaries %%start_time%%" page has been created. |

| open_ok | /%%workspace%%/index.cgi?Edit Summaries %%start_time%% |  |
| click_ok | st-edit-button-link |  |
| wait_for_text_present_ok | Editing: Edit Summaries %%start_time%% | 55000 |
| wait_for_element_visible_ok | st-save-button-link | 30000 |
| pause | %%pt%% |  |
| MouseOver | st-save-button-link |  |
| pause | %%pt%% |  |
| wait_for_element_present_ok | st-edit-summary-text-area | 5000 |
| click_ok | st-edit-summary-text-area |  |
| type_ok | st-edit-summary-text-area | Quick Summary for my friends |
| click_and_wait | st-save-button-link |  |
| wait_for_element_present_ok | st-edit-button-link | 30000 |
| click_ok | st-edit-button-link |  |
| wait_for_element_visible_ok | st-save-button-link | 55000 |
| pause | %%pt%% |  |
| MouseOver | st-save-button-link |  |
| wait_for_element_visible_ok | st-edit-summary-text-area | 30000 |
| click_ok | st-edit-summary-text-area |  |
| type_ok | st-edit-summary-text-area | A second summary for a wikitest |
| click_and_wait | st-save-button-link |  |
| wait_for_element_visible_ok | st-edit-button-link |  |
| st-watch-page | 1 |  |
| wait_for_element_visible_ok | link=3 Revisions |  |

| *Comment* | Test Case: Edit Summaries Revision History |  |
| click_and_wait | link=3 Revisions |  |
| wait_for_element_present_ok | link=Back To Current Revision | 30000 |
| text_like | qr/A second summary for a wikitest.+Quick Summary for my friends/ |  |

| *Comment* | Test Case: Edit Summaries Check Search Results |  |
| type_ok | st-search-term | Edit AND Summaries AND %%start_time%% |
| click_and_wait | st-search-submit |  |
| wait_for_element_present_ok | link=Edit Summaries %%start_time%% |  |
| wait_for_element_present_ok | link=Titles |  |
| text_like | st-listview-form | Edit summary: A second summary for a wikitest |
| text_unlike | st-listview-form | Quick Summary for my friends |

| *Comment* | Test Case: Edit Summaries Check List Views |  |
| *Comment* | Test Case: Edit Summaries - Search defaults to summaries, the rest default to titles |  |
| click_and_wait | Link=What's New |  |
| wait_for_element_present_ok | link=Edit Summaries %%start_time%% | 30000 |
| click_and_wait | Link=Summaries |  |
| wait_for_element_present_ok | link=Edit Summaries %%start_time%% | 30000 |
| text_like | st-listview-form | Edit summary: A second summary for a wikitest |
| text_unlike | st-listview-form | Quick Summary for my friends |

| *Comment* | Test Case: Edit Summaries - Recently Viewed |  |
| click_and_wait | Link=Recently Viewed |  |
| wait_for_element_present_ok | link=Summaries |  |
| click_and_wait | Link=Summaries |  |
| wait_for_element_present_ok | link=Edit Summaries %%start_time%% | 30000 |
| text_like | st-listview-form | Edit summary: A second summary for a wikitest |
| text_unlike | st-listview-form | Quick Summary for my friends |

| *Comment* | Test Case: Edit Summaries - Your Watchlist |  |
| click_and_wait | Link=Your Watchlist |  |
| wait_for_element_present_ok | Link=Summaries |  |
| click_and_wait | Link=Summaries |  |
| wait_for_element_present_ok | link=Edit Summaries %%start_time%% | 30000 |
| text_like | st-listview-form | Edit summary: A second summary for a wikitest |
| text_unlike | st-listview-form | Quick Summary for my friends |

| *Comment* | Test Case: Edit Summaries - My Watchlist |  |
| click_and_wait | Link=My Watchlist |  |
| wait_for_element_present_ok | Link=Summaries |  |
| click_and_wait | Link=Summaries |  |
| wait_for_element_present_ok | link=Edit Summaries %%start_time%% | 30000 |
| text_like | st-listview-form | Edit summary: A second summary for a wikitest |
| text_unlike | st-listview-form | Quick Summary for my friends |

| *Comment* | Test Case: Edit Summaries - All Pages (defaults to date sort, will be on top) |  |
| click_and_wait | Link=All Pages |  |
| wait_for_element_present_ok | Link=Summaries |  |
| click_and_wait | Link=Summaries |  |
| wait_for_element_present_ok | link=Edit Summaries %%start_time%% | 30000 |
| text_like | st-listview-form | Edit summary: A second summary for a wikitest |
| text_unlike | st-listview-form | Quick Summary for my friends |

| *Comment* | Test Case: Edit Summaries - Orphaned Pages |  |
| click_and_wait | Link=Orphaned Pages |  |
| wait_for_element_present_ok | Link=Summaries |  |
| click_and_wait | Link=Summaries |  |
| wait_for_element_present_ok | link=Edit Summaries %%start_time%% | 30000 |
| text_like | st-listview-form | Edit summary: A second summary for a wikitest |
| text_unlike | st-listview-form | Quick Summary for my friends |
| click_and_wait | link=Edit Summaries %%start_time%% |  |
| wait_for_element_visible_ok | st-edit-button-link |  |
| st-watch-page | 0 |  |

| *Comment* | Test Case: Edit Summaries teardown |  |
| st-admin | purge-page --workspace %%workspace%% --page edit_summaries_%%start_time%% | page was purged |

| *Comment* | Test case: Edit Summaries COMPLETED |  |  |
