| *Comment* | Test case: Staging Control Panel |  |

| st-admin | give-accounts-admin --email %%email%% | %%email%% now has accounts admin access |

| set | new_acct | acct%%start_time%% |
| set | new_workspace | wksp%%start_time%% |
| set | new_user | user%%start_time%% |
| set | cli_user | cli%%start_time%%@ken.socialtext.net |

| *Comment* | Test case: Staging Control Panel Socialtext Account exists |  |
| open | /nlw/control/account |  |
| verifyTextPresent | Accounts |  |
| clickAndWait | link=Socialtext |  |
| verifyTextPresent | Socialtext account |  |

| *Comment* | Test case: Staging Control Panel Create and verify new account |  |
| clickAndWait | link=Accounts |  |
| type | //form[2]/input[@id='name'] | %%new_acct%% |
| clickAndWait | //form[2]/input[2] |  |
| verifyTextPresent | The %%new_acct%% account has been created. |  |
| *Comment* | Test case: Staging Control Panel Create a new workspace in the new account |  |
| st-admin | create-workspace --name %%new_workspace%% --title %%new_workspace%% --account %%new_acct%% |  |
| clickAndWait | link=%%new_acct%% |  |
| clickAndWait | link=%%new_workspace%% |  |
| verifyTextPresent | %%new_workspace%% workspace |  |

| *Comment* | Test case: Staging Control Panel Socialtext Search Accounts |  |
| open | /nlw/control/account |  |
| type | //form[1]/input[@id='name'] | Socialtext |
| clickAndWait | //form[1]/input[2] |  |
| text_like | link=Socialtext | Socialtext |
| type | //form[1]/input[@id='name'] | %%new_acct%% |
| clickAndWait | //form[1]/input[2] |  |
| text_like | link=%%new_acct%% | %%new_acct%% |

| *Comment* | Test case: Staging Control Panel Change new workspace account to Socialtext |  |
| open | /nlw/control/workspace |  |
| type | name | %%new_workspace%% |
| st-submit |  |  |
| clickAndWait | link=%%new_workspace%% |  |
| verifyTextPresent | %%new_workspace%% |  |
| select | account_id | label=Socialtext |
| st-submit |  |  |
| verifyTextPresent | The %%new_workspace%% workspace is now part of the Socialtext account. |  |
| verifyTextPresent | URI: |  |

| *Comment* | Test case: Staging Control Panel Search for a non-existant workspace |  |
| clickAndWait | link=Workspaces |  |
| type | name | zildjian |
| st-submit |  |  |
| verifyTextPresent | Showing 0 - 0 of 0 total. |  |

| *Comment* | Test case: Staging Control Panel search for an existing workspace |  |
| type | name | %%new_workspace%% |
| st-submit |  |  |
| verifyTextPresent | Showing 1 - 1 of 1 total. |  |

| *Comment* | Test case: Staging Control Panel create a user, add as admin, verify admin |  |
| open | /nlw/control/user |  |
| st-admin | create-user --email %%cli_user%% --password wikicli --first-name Wiki --last-name CLI | A new user with the username "%%cli_user%%" was created |
| st-admin | add-workspace-admin --email %%cli_user%% --workspace %%new_workspace%% |  |
| clickAndWait | link=Workspaces |  |
| type | name | %%new_workspace%% |
| st-submit |  |  |
| clickAndWait | link=%%new_workspace%% |  |
| verifyTextPresent | workspace admin |  |

| *Comment* | Test case: Staging Control Panel give and remove account and console permissions |  |
| st-admin | give-system-admin --email %%email%% | now has system admin access |
| clickAndWait | link=Wiki CLI <%%cli_user%%> |  |
| clickAndWait | //input[@value='Give Access to Socialtext Accounts'] |  |
| verifyTextPresent | Gave Socialtext Accounts access to %%cli_user%% |  |
| clickAndWait | //input[@value='Remove Access to Socialtext Accounts'] |  |
| verifyTextPresent | Removed Socialtext Accounts access from %%cli_user%% |  |
| clickAndWait | //input[@value='Give Access to Socialtext System Management'] |  |
| verifyTextPresent | Gave Socialtext System Management access to %%cli_user%% |  |
| clickAndWait | //input[@value='Remove Access to Socialtext System Management'] |  |
| verifyTextPresent | Removed Socialtext System Management access from %%cli_user%% |  |

| *Comment* | Test case: Staging Control Panel search for new user |  |
| clickAndWait | link=Users |  |
| type | username | %%cli_user%% |
| st-submit |  |  |
| verifyTextPresent | Showing 1 - 1 of 1 total. |  |

| *Comment* | Test case: Staging Control Panel Set up data for sorting |  |

| clickAndWait | link=Accounts |  |
| type | //form[2]/input[@id='name'] | 0sort1account%%start_time%% |
| clickAndWait | //form[2]/input[2] |  |
| verifyTextPresent | The 0sort1account%%start_time%% account has been created. |  |
| clickAndWait | link=Accounts |  |
| type | //form[2]/input[@id='name'] | 0sort2account%%start_time%% |
| clickAndWait | //form[2]/input[2] |  |
| verifyTextPresent | The 0sort2account%%start_time%% account has been created. |  |
| clickAndWait | link=Accounts |  |
| type | //form[2]/input[@id='name'] | 0sort3account%%start_time%% |
| clickAndWait | //form[2]/input[2] |  |
| verifyTextPresent | The 0sort3account%%start_time%% account has been created. |  |

| st-admin | create-workspace --name 0sort1workspace1%%start_time%% --title 0sort1workspace1%%start_time --account 0sort1account%%start_time%% |  |
| st-admin | create-workspace --name 0sort2workspace1%%start_time%% --title 0sort2workspace1%%start_time --account 0sort2account%%start_time%% |  |
| st-admin | create-workspace --name 0sort3workspace1%%start_time%% --title 0sort3workspace1%%start_time --account 0sort3account%%start_time%% |  |

| st-admin | create-workspace --name 0sort2workspace2%%start_time%% --title 0sort2workspace2%%start_time --account 0sort2account%%start_time%% |  |
| st-admin | create-workspace --name 0sort3workspace2%%start_time%% --title 0sort3workspace2%%start_time --account 0sort3account%%start_time%% |  |

| st-admin | create-workspace --name 0sort3workspace3%%start_time%% --title 0sort3workspace3%%start_time --account 0sort3account%%start_time%% |  |

| st-admin | create-user --email 0sort1user1@%%start_time%%.com --password sort1user1 --first-name 0sort11 --last-name 0user11 |
| st-admin | create-user --email 0sort2user1@%%start_time%%.com --password sort2user1 --first-name 0sort21 --last-name 0user21 |
| st-admin | create-user --email 0sort3user1@%%start_time%%.com --password sort3user1 --first-name 0sort31 --last-name 0user31 |

| st-admin | create-user --email 0sort2user2@%%start_time%%.com --password 0sort2user2 --first-name 0sort22 --last-name 0user22 |
| st-admin | create-user --email 0sort3user2@%%start_time%%.com --password 0sort3user2 --first-name 0sort32 --last-name 0user32 |

| st-admin | create-user --email 0sort3user3@%%start_time%%.com --password 0sort3user3 --first-name 0sort33 --last-name 0user33 |

| st-admin | add-member --email 0sort1user1@%%start_time%%.com --workspace 0sort1workspace1%%start_time%% |
| st-admin | add-member --email 0sort2user2@%%start_time%%.com --workspace 0sort1workspace1%%start_time%% |
| st-admin | add-member --email 0sort3user3@%%start_time%%.com --workspace 0sort1workspace1%%start_time%% |
| st-admin | add-member --email 0sort2user2@%%start_time%%.com --workspace 0sort2workspace2%%start_time%% |
| st-admin | add-member --email 0sort3user3@%%start_time%%.com --workspace 0sort2workspace2%%start_time%% |
| st-admin | add-member --email 0sort3user3@%%start_time%%.com --workspace 0sort3workspace3%%start_time%% |

| *Comment* | Test case: Staging Control Panel sorting Accounts display |  |
| open | /nlw/control/account |  |
| text_like | qr/sort1account.+sort2account.+sort3account/ |  |
| clickAndWait | link=Name |  |
| text_like | qr/sort3account.+sort2account.+sort1account/ |  |
| clickAndWait | link=Number of Workspaces |  |
| text_like | qr/sort1account.+sort2account.+sort3account/ |  |
| clickAndWait | link=Number of Workspaces |  |
| text_like | qr/sort3account.+sort2account.+sort1account/ |  |
| clickAndWait | link=Number of Users |  |
| text_like | qr/sort3account.+sort2account.+sort1account/ |  |
| clickAndWait | link=Number of Users |  |
| text_like | qr/sort1account.+sort2account.+sort3account/ |  |

| *Comment* | Test case: Staging Control Panel sorting Workspaces display |  |
| clickAndWait | link=Workspaces |  |
| clickAndWait | link=Name |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| clickAndWait | link=Name |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| clickAndWait | link=Number of Users |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| clickAndWait | link=Number of Users |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| clickAndWait | link=Account |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| clickAndWait | link=Account |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| clickAndWait | link=Created |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| clickAndWait | link=Created |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| clickAndWait | link=Created By |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| clickAndWait | link=Created By |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |

| *Comment* | Test case: Staging Control Panel sorting Users display |  |
| clickAndWait | link=Users |  |
| text_like | Search by username |  |
| clickAndWait | link=Name |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| text_like | zack |  |
| clickAndWait | link=Name |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| text_like | 0sort11 |  |
| clickAndWait | link=Number of Workspaces |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| clickAndWait | link=Number of Workspaces |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| text_like | 31 |  |
| clickAndWait | link=Users |  |
| clickAndWait | link=Invited |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| text_like | 2003 |  |
| clickAndWait | link=Invited |  |
| text_like | qr/Showing.+\d.+of.+\d+.+total/ |  |
| text_like | 2008 |  |
| clickAndWait | link=Invited By |  |
| clickAndWait | link=Invited By |  |
| text_like | qr/adina\.levin/ |  |

| *Comment* | Test case: Staging Control Panel teardown |  |
| st-admin | remove-accounts-admin --email %%email%% | no longer has accounts admin access |
| st-admin | remove-system-admin --email %%email%% | no longer has system admin access |
| st-admin | give-accounts-admin --email %%email%% | now has accounts admin access |
| st-admin | give-system-admin --email %%email%% | now has system admin access |
| st-admin | delete-workspace --workspace 0sort1workspace1%%start_time%% --no-export |  |
| st-admin | delete-workspace --workspace 0sort2workspace1%%start_time%% --no-export |  |
| st-admin | delete-workspace --workspace 0sort3workspace1%%start_time%% --no-export |  |
| st-admin | delete-workspace --workspace 0sort2workspace2%%start_time%% --no-export |  |
| st-admin | delete-workspace --workspace 0sort3workspace2%%start_time%% --no-export |  |
| st-admin | delete-workspace --workspace 0sort3workspace3%%start_time%% --no-export |  |

| *Comment* | Test case: Staging Control Panel COMPLETED |  |

^ TODO

(please update this)

Accounts

* has heading
* Socialtext account is there
* create new account
* create new workspace in account
* verify it shows up

Workspaces

* verify newly created workspace shows up
* add user through command line, verify it shows up
* verify details for workspace
* assign workspace to new account
* verify change
* verify link to workspace we don't have permission for (link should be there)
* search workspaces

Users

* change user to admin, verify change in UI
* verify details for user
* remove access buttons
** verify action buttons are/aren't available depending on access rights
* search users
