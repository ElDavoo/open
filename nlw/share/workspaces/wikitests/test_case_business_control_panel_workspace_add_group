| *Comment* | Test Case: Business Control Panel Groups Workspace Add Group |

| *Comment* | Test Case: Business Control Panel Groups Workspace Add Group SETUP |  |  |
| st-admin | give-accounts-admin --username %%username%% |  |  |
| set | acct | bcpwagacct%%start_time%% |  |
| st-admin | create-account --name %%acct%% |  |  |
| set | group | groupbcpwag%%start_time%% |  |
| create-group | %%group%% | %%agw-acct%% | %%username%% |
| set | testuser | testuserwag%%start_time%%@ken.socialtext.net |  |
| create-user | %%testuser%% | %%password%% |
| add-user-to-group | %%testuser%% | %%group_id%% |
| set | workspace | bcpwad%%start_time%% |  |
| create-workspace | %%workspace%% | %%acct%% |  |

| *Comment* | Test Case: Business Control Panel Groups Workspace Add Group Go to Workspace |  |
| open_ok | /nlw/control/workspace |  |
| wait_for_element_visible_ok | name |  |
| type_ok | name | %%workspace%% |
| wait_for_element_visible_ok | st-ws-search-submit | 30000 |
| click_and_wait | st-ws-search-submit |  |
| wait_for_element_visible_ok | link=%%workspace%% | 30000 |
| click_and_wait | link=%%workspace%% |  |

| *Comment* | Test Case: Business Control Panel Groups Workspace Add Group Add the Group |  |
| wait_for_element_visible_ok | link=Add Group To Workspace | 3000 |
| text_like | //body | Groups (0) |
| click_and_wait | link=Add Group To Workspace |  |
| wait_for_element_visible_ok | send-invite-message | 30000 |
| wait_for_element_visible_ok | invite-as-admins | 30000 |
| text_like | //body | qr/Add Group To Workspace/ism |
| text_like | //body | Send invitation email |
| wait_for_element_visible_ok | st-select-group-id | 3000 |
| select-ok | st-select-group-id | Default,%%group%% |
| click_and_wait | st-add-group-to-workspace |  |

| *Comment* | Test Case: Business Control Panel Workspace Add Group Verify the add |  |
| text_like | //body | qr/Group is now a member of the %%workspace%% workspace/ism |
| text_like | //body | Groups (1) |
| wait_for_element_visible_ok | link=%%group%% | 30000 |
| st-admin | show-members -w %%workspace%% | member |
| wait_for_element_visible_ok | link=%%group%% | 30000 |
| text_like | //body | Users (0) |

| *Comment* | Test Case: Business Control Panel Groups Workspace Add Group (Now Remove It) |  |
| wait_for_element_visible_ok | group_id | 30000 |
| click_ok | name=group_id value=%%group_id%% |  |
| wait_for_element_visible_ok | st-remove-group-from-workspace-submit | 30000 |
| click_and_wait | st-remove-group-from-workspace-submit |  |
| confirmation_like | qr/Are you sure you want to remove this Group from the %%workspace%% Workspace?/ism |  |
| wait_for_element_visible_ok | link=Usage Reports | 30000 |
| text_like | //body | %%group%% Group has been removed from the Workspace |
| text_like | //body | Groups (0) |

| *Comment* | Test Case: Business Control Panel Groups Workspace Add Group TEARDOWN |
| st-admin | delete-workspace --workspace %%workspace%% --no-export |
