* HighPermissions

*NOTE: This test only works if selenium_browser has higher powers, i.e. *chrome for firefox*

| *Comment* | Test Case: Upload File |  |
| *Comment* | wikitest files should be in %%wikitest_files%% on the browser server |  |
| *Comment* | *This test only works if selenium_browser has higher powers, i.e. *chrome for firefox* |  |
| open_ok | /%%workspace%%/index.cgi?start_here |
| wait_for_element_visible_ok | st-attachments-uploadbutton | 30000 |

| *Comment* | Test Case: Upload File wikitest.doc add a link |  |
| click_ok | st-attachments-uploadbutton |  |
| wait_for_element_present_ok | st-attachments-attach-filename | 50000 |
| click_ok | st-attachments-attach-filename |  |
| type_ok | st-attachments-attach-filename | %%wikitest_files%%wikitest.doc |
| click_ok | st-attachments-attach-submit |  |
| wait_for_text_present_ok | Uploaded files | 60000 |

Using selenium_browser set to *iehta, opening the attachments UI ALWAYS opens a browser pop up
Until we can figure out a hack to close it, we can't do file operations with IE 7.

^ END

| *Comment* | Test Case: Upload File wikitest.pdf without link |  |
| type_ok | st-attachments-attach-filename | %%wikitest_files%%wikitest.pdf |
| click_ok | st-attachments-attach-embedcheckbox |  |
| wait_for_text_present_ok | Upload | 10000 |
| value_like | st-attachments-attach-submit | Upload another file |
| click_ok | st-attachments-attach-submit |  |
| wait_for_text_present_ok | wikitest.doc, wikitest.pdf | 60000 |
| click_ok | st-attachments-attach-closebutton |  |

| *Comment* | Test Case: Upload File Page |  |
| text_like | st-attachments | wikitest.doc |
| text_like | st-attachments | wikitest.pdf |
| text_like | st-page-maincontent | wikitest.doc |
| text_unlike | st-page-maincontent | wikitest.pdf |

| *Comment* | Test Case: Upload File Zip File no unpack |  |
| click_ok | st-attachments-uploadbutton |  |
| type_ok | st-attachments-attach-filename | %%wikitest_files%%wikitestzip.zip |
| text_like | st-attachments-attach-unpacklabel | Expand zip archive and attach individual files to the page |
| click_ok | st-attachments-attach-submit |  |
| wait_for_text_present_ok | Uploaded files | 60000 |
| click_ok | st-attachments-attach-closebutton |  |
| text_like | st-attachments | wikitestzip.zip |

| *Comment* | Test Case: Upload File Unpack Zip File |  |
| click_ok | st-attachments-uploadbutton |  |
| type_ok | st-attachments-attach-filename | %%wikitest_files%%wikitestzip.zip |
| click_ok | st-attachments-attach-unpackcheckbox |  |
| click_ok | st-attachments-attach-submit |  |
| wait_for_text_present_ok | Uploaded files | 60000 |
| click_ok | st-attachments-attach-closebutton |  |
| text_like | st-attachments | publictests-2-2.xls |
| text_like | st-attachments | st-logo-symbol.jpg |
| text_like | st-attachments | O Star.txt |
| text_like | st-attachments | Poem By Robert Frost.pdf |

| *Comment* | Test Case: Upload File Edit Mode - verify page is still editable |  |
| click_ok | st-edit-button-link |  |
| wait_for_text_present_ok | Editing | 10000 |
| text_like | st-editing-title | Editing: Upload %%start_time%% |
| click_ok | st-cancel-button-link |  |

| *Comment* | Test Case: Upload File Teardown |  |
| click_and_wait | link=Delete Page |  |
| confirmation_like | Are you sure you want to delete this page? |  |

| *Comment* | Test Case: Upload File COMPLETED |
