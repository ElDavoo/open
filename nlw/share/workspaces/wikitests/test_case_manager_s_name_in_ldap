| *Comment* | Test Case: Manager's Name in LDAP |

Requires LDAP to be enabled.

* Fixture: SocialWidgets

| set | account_id | 4 |

| *Comment* | Test Case: Manager's Name in LDAP My profile - Configure Manager name to be user-based in control panel |  |
| open_ok | /nlw/control/account/%%account_id%%/edit_profile_field?profile_field_id=18 |  |
| wait_for_element_visible_ok | data-source-select | 30000 |
| wait_for_element_visible_ok | //input[@value='Save Field'] | 30000 |
| select_ok | data-source-select | label=User |
| click_and_wait | //input[@value='Save Field'] |  |
| open_ok | /st/dashboard |  |
| st-ldap-vanilla | refresh-users --force |  |

| *Comment* | Test Case: Manager's Name in LDAP My profile - Manager name is editable field |  |
| st-logoutin | Ozzy Osbourne | ld@pu53r |
| open_ok | /st/edit_profile |
| st-name-widget | 1 | edit_profile |
| st-widget-title-like | edit_profile | Edit Profile |
| st-select-widget-frame | edit_profile |  |
| wait_for_element_present_ok | //input[@name='supervisor.id'] | 30000 |
| select-frame | relative=parent |  |

| *Comment* | Test Case: Manager's Name in LDAP Configure Manager name in control panel |  |
| st-logoutin |  |  |
| open_ok | /nlw/control/account/%%account_id%%/edit_profile_field?profile_field_id=18 |  |
| wait_for_element_visible_ok | data-source-select | 30000 |
| wait_for_element_visible_ok | //input[@value='Save Field'] | 30000 |
| select_ok | data-source-select | label=External |
| click_and_wait | //input[@value='Save Field'] |  |
| open_ok | /st/dashboard |  |
| st-ldap-vanilla | refresh-users --force |  |

| *Comment* | Test Case: Manager's Name in LDAP My profile - Now manager |  |
| st-logoutin | Ozzy Osbourne | ld@pu53r |
| open_ok | /st/profile |
| st-name-widget | 1 | profile |
| st-widget-title-like | profile | Profile |
| st-select-widget-frame | profile |  |
| text_like | //body | Manager: Sharon Osbourne |
| wait_for_element_visible_ok | link=Sharon Osbourne | 30000 |

| select-frame | relative=parent |  |
| open_ok | /st/dashboard |  |

| *Comment* | Test Case: Manager's Name in LDAP My profile - Manager name is not field |  |
| open_ok | /st/edit_profile |
| st-name-widget | 1 | edit_profile |
| st-widget-title-like | edit_profile | Edit Profile |
| st-select-widget-frame | edit_profile |  |
| wait_for_element_not_present_ok | //input[@name='supervisor.id'] | 30000 |
| text_like | //body | Sharon Osbourne |
| select-frame | relative=parent |  |

| *Comment* | Test Case: Manager's Name in LDAP Configure No Manager name in control panel |  |
| st-logoutin |  |  |
| open_ok | /nlw/control/account/%%account_id%%/edit_profile_field?profile_field_id=18 |  |
| wait_for_element_visible_ok | data-source-select | 30000 |
| wait_for_element_visible_ok | //input[@value='Save Field'] | 30000 |
| select_ok | data-source-select | label=User |
| click_and_wait | //input[@value='Save Field'] |  |
| open_ok | /st/dashboard |  |
| st-ldap-vanilla | refresh-users --force |  |

| *Comment* | Test Case: Manager's Name in LDAP My profile - Once more, manager name is editable |  |
| st-logoutin | Ozzy Osbourne | ld@pu53r |
| open_ok | /st/edit_profile |
| st-name-widget | 1 | edit_profile |
| st-widget-title-like | edit_profile | Edit Profile |
| st-select-widget-frame | edit_profile |  |
| wait_for_element_present_ok | //input[@name='supervisor.id'] | 30000 |
| select-frame | relative=parent |  |

| *Comment* | Test Case: Manager's Name in LDAP COMPLETED |
