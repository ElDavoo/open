| *Comment* | Test Case: Signals Wikitext |  |

* Fixture: SocialWidgets

| set | pause | 8000 |
| http-user-pass | %%username%% | %%password%% |

| *Comment* | Test Case: Signals Wikitext wiki link |  |
| post-signal | `{link: help [Searching] %%start_time%%}` |  |
| open-ok | /st/signals |  |
| wait_for_element_visible_ok | link=Searching | 30000 |
| wait_for_element_visible_ok | `//a[contains(@href,'Searching#%%start_time%%')]` | 30000 |
| click_and_wait | link=Searching |  |
| location_like | /help/Searching |  |

| *Comment* | Test Case: Signals Wikitext named wiki link |  |
| post-signal | `"This better be link text for the Help home page at %%start_time%%"{link: help [Socialtext Dashboard] %%start_time%%}` |  |
| open-ok | /st/signals |  |
| wait_for_element_visible_ok | `//a[contains(@href,'Dashboard#%%start_time%%')]` | 30000 |
| wait_for_element_visible_ok | `link=This better be link text for the Help home page at %%start_time%%` | 30000 |
| click_and_wait | `link=This better be link text for the Help home page at %%start_time%%` |  |
| location_like | qr/\/help\/Socialtext.+Dashboard/ |  |

| *Comment* | Test Case: Signals Wikitext web link |  |
| post-signal | `http://www.socialtext.com#%%start_time%%` |  |
| open-ok | /st/signals |  |
| wait_for_element_visible_ok | `//a[contains(@href,'http://www.socialtext.com#%%start_time%%')]` | 30000 |
| wait_for_element_visible_ok | `link=http://www.socialtext.com#%%start_time%%` | 30000 |
| click_and_wait | `link=http://www.socialtext.com#%%start_time%%` |  |
| location_like | www.socialtext.com |  |

| *Comment* | Test Case: Signals Wikitext bracketed web link |  |
| post-signal | `<http://kenpier.org#%%start_time%%>` |  |
| open-ok | /st/signals |  |
| wait_for_element_visible_ok | `link=http://kenpier.org#%%start_time%%` | 30000 |
| click_and_wait | `link=http://kenpier.org#%%start_time%%` |  |
| location_like | sites.google.com/site/kenpier/#%%start_time%% |  |

| *Comment* | Test Case: Signals Wikitext named web link |  |
| post-signal | `"MARCOM Website %%start_time%%"<http://www.socialtext.com#%%start_time%%-2>` |  |
| open-ok | /st/signals |  |
| wait_for_element_visible_ok | `link=MARCOM Website %%start_time%%` | 30000 |
| click_and_wait | `link=MARCOM Website %%start_time%%` |  |
| location_like | www.socialtext.com |  |

| *Comment* | Test Case: Signals Wikitext named web link with mention |  |
| post-signal | `"Socialtext Home %%start_time%%"<http://www.socialtext.com#%%start_time%%-3> mentioning {user: 1}` |  |
| open-ok | /st/signals |  |
| wait_for_element_visible_ok | link=Socialtext Home %%start_time%% | 30000 |
| click_and_wait | link=Socialtext Home %%start_time%% |  |
| location_like | www.socialtext.com |  |
| open-ok | /st/signals |  |
| wait_for_element_visible_ok | link=System User | 30000 |
| click_and_wait | link=System User |  |
| text_like | Profile |  |
| text_like | System User |  |

| *Comment* | Test Case: Signals Wikitext user wafl %%username%% |  |
| post-signal | `{user: %%username%%}` |  |
| open-ok | /st/signals |  |
| wait_for_element_visible_ok | `link=%%short_username%%` | 30000 |
| click_and_wait | `link=%%short_username%%` |  |
| text_like | Profile |  |
| text_like | %%short_username%% |  |

| *Comment* | Test Case: Signals Wikitext user wafl nosuchuser |  |
| post-signal | `{user: nosuchuser-%%start_time%%}` |  |
| open-ok | /st/signals |  |
| wait_for_text_present_ok | Unknown Person | 30000 |

| *Comment* | Test Case: Signals Wikitext bold italic strike as_is signal content |  |
| post-signal | `*_-"Bold Italic Strike link to Socialtext Home at %%start_time%%"<http://www.socialtext.com#%%start_time%%>-_*` |  |
| post-signal | `-_*bold italic strike %%start_time%%*_-` |  |
| post-signal | `*bold%%start_time%%* _italic%%start_time%%_ -strike%%start_time%%- {{_asis:_ *bold* -%%start_time%%-}}` |  |
| open-ok | /st/signals |  |
| pause | %%pause%% |  |

| *Comment* | VERIFY SIGNAL *bold* _italic_ -strike- {{_asis:_ *bold*}} |  |
| is_element_present_ok | //div[contains(@class,'signal_body')]/b[contains(text(),'bold%%start_time%%')] |  |
| is_element_present_ok | //div[contains(@class,'signal_body')]/i[contains(text(),'italic%%start_time%%')] |  |
| is_element_present_ok | //div[contains(@class,'signal_body')]/del[contains(text(),'strike%%start_time%%')] |  |
| text_like | `_asis:_ *bold* -%%start_time%%-` |  |

| *Comment* | VERIFY SIGNAL -_*bold italic strike*_- |  |
| is_element_present_ok | //div[contains(@class,'signal_body')]/del/i/b[contains(text(),'bold italic strike %%start_time%%')] |  |

| *Comment* | VERIFY SIGNAL *_-Bold Italic Strike link to Socialtext Home-_* |  |
| is_element_present_ok | //div[contains(@class,'signal_body')]/b/i/del/a[contains(text(),'Bold Italic Strike link to Socialtext Home at %%start_time%%')] |  |
| click_and_wait | //a[contains(text(),'Bold Italic Strike link to Socialtext Home at %%start_time%%')] |  |
| location_like | www.socialtext.com |  |

| *Comment* | Test Case: Signals Wikitext COMPLETED |  |
