Note: Cannot automate attachments, test is slightly reduced

| *Comment* | Test Case: Tools: Duplicate Page |  |

| setSpeed | 150 |  |
| *Comment* | Test Case: Tools: Duplicate Page Create test page |  |
| open_ok | /%%workspace%%/index.cgi?action=homepage |  |
| click_and_wait | st-newpage-link |  |
| wait_for_element_visible_ok | link=Advanced | 10000 |
| click_ok | link=Advanced |  |
| wait_for_element_visible_ok | wikiwyg_wikitext_textarea | 10000 |
| type_ok | st-newpage-pagename-edit | Dupe Test Page %%start_time%% |
| type_ok | wikiwyg_wikitext_textarea | Dupe Test Page content %%start_time%% |
| click_ok | st-edit-mode-tagbutton |  |
| type_ok | st-tagqueue-field | Dupe Tag %%start_time%% |
| click_ok | st-tagqueue-submitbutton |  |
| click_ok | st-tagqueue-closebutton |  |
| click_and_wait | st-save-button-link |  |

| *Comment* | Test Case: Tools: Duplicate Page Test Duplicate popup, duplicate the page |  |
| click_ok | link=Duplicate Page |  |
| pause | 1000 |  |
| open_ok | /%%workspace%%/index.cgi?action=duplicate_popup;page_name=dupe_test_page_%%start_time%% |  |
| wait_for_text_present_ok | Duplicate | 30000 |
| click_and_wait | Button |  |
| open_ok | /%%workspace%%/index.cgi?duplicate_of_dupe_test_page_%%start_time%% |  |
| text_like | st-tags | Dupe Tag %%start_time%% |
| open_ok | /%%workspace%%/index.cgi?dupe_test_page_%%start_time%% |  |

| *Comment* | Test Case: Tools: Duplicate Page Edit first page, save over second page |  |
| click_ok | st-edit-button-link |  |

| wait_for_element_visible_ok | wikiwyg_wikitext_textarea | 10000 |
| type_ok | wikiwyg_wikitext_textarea | 2nd edit |
| click_and_wait | st-save-button-link |  |
| click_ok | link=Duplicate Page |  |
| pause | 1000 |  |

| open_ok | /%%workspace%%/index.cgi?action=duplicate_popup;page_name=dupe_test_page_%%start_time%% |  |
| wait_for_text_present_ok | Duplicate | 30000 |
| click_and_wait | Button |  |
| text_like | st-popup-duplicate | The new page name you selected, "Duplicate of Dupe Test Page %%start_time%%", is already in use. Please choose a different name. If you are sure you wish to overwrite the existing "Duplicate of Dupe Test Page %%start_time%%" page, please press "Duplicate" again. |
| click_and_wait | Button |  |
| open_ok | /%%workspace%%/index.cgi?duplicate_of_dupe_test_page_%%start_time%% |  |
| text_like | st-page-maincontent | 2nd edit |

| *Comment* | Test Case: Tools: Duplicate Page Teardown |  |
| open_ok | /%%workspace%%/index.cgi?action=homepage | move away from the page you are about to delete |
| st-admin | purge-page --w %%workspace%% --page duplicate_of_dupe_test_page_%%start_time%% | was purged |
| st-admin | purge-page --w %%workspace%% --page dupe_test_page_%%start_time%% | was purged |

| *Comment* | Test Case: Tools: Duplicate Page COMPLETED |  |
