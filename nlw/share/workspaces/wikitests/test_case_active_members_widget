| *Comment* | Test Case: Active Members Widget |  |

* Fixture: SocialWidgets

| set | am_acct_one | active-memb-1-%%start_time%% |
| set | am_acct_two | active-memb-2-%%start_time%% |
| set | members_email_1 | members-email-1%%start_time%%@ken.socialtext.net |
| set | members_user_1 | members email 1%%start_time%% |
| set | members_email_2 | mem2rs-email-2%%start_time%%@ken.socialtext.net |
| set | members_user_2 | mem2rs email 2%%start_time%% |
| set | members_email_3 | mem3rs-email-3%%start_time%%@ken.socialtext.net |
| set | members_user_3 | mem3rs email 3%%start_time%% |

| set | view_edit_email | view-edit-%%start_time%%@ken.socialtext.net |
| set | view_edit_user | view edit %%start_time%% |
| set | createme_page1 | members page 1 %%start_time%% |
| set | createme_page2 | members page 1 %%start_time%% |
| set | am_ws_1 | active-memb-ws-1-%%start_time%% |
| set | am_ws_2 | active-memb-ws-2-%%start_time%% |

| include | [Test Case: Active Members Setup] |  |

| *Comment* | Test Case: Active Members Widget ADD THE WIDGET |  |
| open_ok | /?dashboard | 60000 |
| st-empty-container |  |  |
| wait_for_element_visible_ok | link=Add Content | 30000 |
| click_and_wait | link=Add Content |  |
| wait_for_element_visible_ok | gallery-widget-Active Members | 30000 |
| click_and_wait | gallery-widget-Active Members |  |

| *Comment* | Test Case: Active Members Widget is the widget there? |  |
| wait_for_element_visible_ok | //a[@class='close'] | 30000 |
| st-name-widget | 1 | active_members |
| st-widget-title-like | active_members | Active Members |
| st-widget-settings | active_members |  |
| wait_for_element_visible_ok | up_account | 30000 |
| click_ok | up_rotate |  |
| select_ok | up_account | %%am_acct_one%% |
| click_ok | st-savebutton-%%active_members%% |  |
| wait_for_element_not_visible_ok | up_account | 30000 |

| *Comment* | Test Case: Active Members Widget Check the content of Viewed |  |
| st-select-widget-frame | active_members |  |
| wait_for_element_visible_ok | link=Readers | 30000 |
| text_like | //body | Viewed |
| wait_for_element_visible_ok | link=Edits | 30000 |
| wait_for_element_visible_ok | link=Signals | 30000 |

| *Comment* | Test Case: Active Content Widget Check the content of Readers |  |
| pause | 2000 |  |
| click_ok | link=Readers |  |
| pause | 2000 |  |
| wait_for_element_visible_ok | link=Viewed | 30000 |
| text_like | //body | Readers |
| wait_for_element_visible_ok | link=Edits | 30000 |
| wait_for_element_visible_ok | link=Signals | 30000 |

| *Comment* | Test Case: Active Content Widget Check the content of Edits |  |
| click_ok | link=Edits |  |
| wait_for_element_visible_ok | link=Viewed | 30000 |
| wait_for_element_visible_ok | link=Readers | 30000 |
| text_like | //body | Edits |
| wait_for_element_visible_ok | link=Signals | 30000 |

| *Comment* | Test Case: Active Content Widget Check the content of Signals |  |
| click_ok | link=Signals |  |
| wait_for_element_visible_ok | link=Viewed | 30000 |
| wait_for_element_visible_ok | link=Readers | 30000 |
| wait_for_element_visible_ok | link=Edits | 30000 |
| select-frame | relative=parent |  |

| *Comment* | Test Case: Active Members Widget Different Accounts Details don't show up |  |
| open_ok | /?dashboard |  |
| st-name-widget | 1 | active_members |
| st-select-widget-frame | active_members |  |
| wait_for_element_visible_ok | link=Edits | 30000 |
| text_like | //body | Viewed |
| text_unlike | //body | test page 1 |
| text_unlike | //body | test page 2 |
| text_unlike | //body | test page 3 |
| select-frame | relative=parent |  |

| *Comment* | Test Case: Active Members Widget Test Account Combo Box |  |
| st-widget-settings | active_members |  |
| wait_for_element_visible_ok | up_account | 30000 |
| select_ok | up_account | %%am_acct_two%% |
| select_ok | up_view | Viewed Profiles |
| click_ok | st-savebutton-%%active_members%% |  |
| wait_for_element_not_visible_ok | up_account | 30000 |
| st-select-widget-frame | active_members |  |
| wait_for_element_visible_ok | link=Edits | 30000 |
| text_like | //body | Viewed |
| text_unlike | //body | Active Content Edit %%start_time%% |
| text_unlike | //body | Active Content Tag %%start_time%% |
| text_unlike | //body | Active Content Comment %%start_time%% |
| text_unlike | //body | Active Content Emailed %%start_time%% |
| text_unlike | //body | Active Content Watch %%start_time%% |
| wait_for_element_visible_ok | link=%%members_user_1%% | 30000 |
| wait_for_element_visible_ok | link=%%members_user_2%% | 30000 |
| wait_for_element_visible_ok | link=%%members_user_3%% | 30000 |

| *Comment* | Test case: Active Members Widget TEARDOWN |  |
| select-frame | relative=parent |  |
| st-empty-container |  |  |
| st-admin | delete-workspace --w %%am_ws_1%% --no-export |  |
| st-admin | delete-workspace --w %%am_ws_2%% --no-export |  |
| *Comment* | Test case: Active Content Widget COMPLETED |  |
