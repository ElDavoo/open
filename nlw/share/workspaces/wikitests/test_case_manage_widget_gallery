| *Comment* | STARTING Test Case: Manage Widget Gallery |

* Fixture: SocialWidgets

| *Comment* | Wipe out the widgets |  |  |
| set_default | pt | 5000 | defaults to five seconds |
| st-admin | remove-accounts-admin --e %%username%% |  |  |
| open_ok | /?dashboard | 60000 |  |
| st-empty-container |  |  |  |

| *Comment* | Test Case: Manage Widget Gallery - bring up gallery, no manage button |  |
| wait_for_element_not_present_ok | link=Manage for Accounts | 30000 |

| *Comment* | Test Case: Manage Widget Gallery - add accounts admin, see "Manage for Accounts" button |  |
| st-admin | give-accounts-admin --e %%username%% |  |
| open_ok | /?dashboard | 60000 |
| wait_for_element_present_ok | link=Manage for Accounts | 30000 |

| *Comment* | Test Case: Manage Widget Gallery - Click Manage button, click Add Content Button |  |
| click_and_wait | link=Manage for Accounts |  |
| wait_for_element_present_ok | link=Add Content |  |
| wait_for_element_present_ok | link=Save... |  |
| wait_for_element_present_ok | link=Cancel |  |
| wait_for_element_present_ok | link=Revert to Default... |  |
| pause | %%pt%% |  |
| click_and_wait | link=Add Content |  |

| *Comment* | Test Case: Manage Widget Gallery - Click Manage Gallery for Accounts |  |
| wait_for_element_present_ok | link=Manage Gallery for Accounts |  |
| click_ok | link=Manage Gallery for Accounts |  |
| wait_for_element_present_ok | link=Add Widget to Gallery | 30000 |

| *Comment* | Test Case: Manage Widget Gallery - Add Widgets to Gallery - widget-url |  |
| pause | %%pt%% |  |
| click_ok | link=Add Widget to Gallery |  |
| pause | %%pt%% |  |
| wait_for_element_present_ok | widget-url | 10000 |
| pause | %%pt%% |  |
| click_ok | widget-url |  |
| type_ok | widget-url | http://www.atlas-labs.net/gadgets/widget/duckhunt/duckhunt.xml |
| click_ok | st-add-widget |  |
| wait_for_text_present_ok | Successfully added your widget | 30000 |
| click_ok | link=Close |  |
| pause | %%pt%% |  |

| *Comment* | Test Case: Manage Widget Gallery - Add Widgets to Gallery - Click link=Duck Hunt |  |
| click_ok | link=Duck Hunt |  |
| *Comment* | Test Case: Manage Widget Gallery - Click save |  |
| wait_for_element_present_ok | link=Save... |  |
| click_ok | link=Save... |  |
| wait_for_element_present_ok | force-update | 30000 |
| click_ok | force-update |  |
| click_ok | link=Save |  |
| *Comment* | Test Case: Manage Widget Gallery - wait for text present Successfully reset all dashboards in the selected account |  |
| wait_for_text_present_ok | Successfully reset all dashboards in the selected account | 30000 |
| click_ok | link=Close |  |

| *Comment* | Test Case: Manage Widget Gallery - back to / |  |
| open_ok | /?dashboard | 60000 |
| wait_for_element_visible_ok | link=Add Content | 3000 |
| st-name-widget | 1 | duck_hunter |
| st-widget-title-like | duck_hunter | Duck Hunt |
| st-name-widget | 2 | learning_resources |
| st-widget-title-like | learning_resources | Learning Resources |

| *Comment* | Test Case: Manage Widget Gallery TEARDOWN |  |
| wait_for_element_present_ok | link=Manage for Accounts | 30000 |
| click_and_wait | link=Manage for Accounts |  |
| wait_for_element_present_ok | link=Revert to Default... | 30000 |
| click_ok | link=Revert to Default... |  |
| wait_for_text_present_ok | Are you sure you want to revert to the Socialtext defaults? | 30000 |
| wait_for_element_present_ok | link=Yes |  |
| pause | %%pt%% |  |
| click_ok | link=Yes |  |
| pause | %%pt%% |  |
| click_ok | link=Save... |  |
| pause | %%pt%% |  |
| wait_for_element_present_ok | force-update |  |
| click_ok | force-update |  |
| click_ok | link=Save |  |
| wait_for_text_present_ok | Successfully reset all dashboards in the selected account | 30000 |
| click_ok | link=Close |  |
| open_ok | /?dashboard | 60000 |
| wait_for_element_visible_ok | link=Add Content | 3000 |
| st-name-widget | 1 | learning_resources |
| st-widget-title-like | learning_resources | Learning Resources |
| st-empty-container |  |  |

| *Comment* | Test Case: Manage Widget Gallery COMPLETED |

Replace this text with your own.
