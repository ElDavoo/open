| *Comment* | Test Case: Calc What's New |  |

| open_ok | %%workspace%%/index.cgi?action=display;page_type=spreadsheet;page_name=hey whatsnew %%start_time%% 0001#edit |  |
| wait_for_element_visible_ok | st-save-button-link | 30000 |
| pause | 5000 | I hate pause; needed for entire page load |
| click_ok | st-save-button-link |  |
| open_ok | %%workspace%%/index.cgi?action=display;page_type=spreadsheet;page_name=hey whatsnew %%start_time%% 0002#edit |  |
| wait_for_element_visible_ok | st-save-button-link | 30000 |
| pause | 5000 | I hate pause; needed for entire page load |
| click_ok | st-save-button-link |  |
| open_ok | %%workspace%%/index.cgi?action=display;page_type=spreadsheet;page_name=hey whatsnew %%start_time%% 0003#edit |  |
| wait_for_element_visible_ok | st-save-button-link | 30000 |
| pause | 5000 | I hate pause; needed for entire page load |
| click_ok | st-save-button-link |  |
| open_ok | %%workspace%%/index.cgi?action=display;page_type=spreadsheet;page_name=hey whatsnew %%start_time%% 0004#edit |  |
| wait_for_element_visible_ok | st-save-button-link | 30000 |
| pause | 5000 | I hate pause; needed for entire page load |
| click_ok | st-save-button-link |  |

| open_ok | /%%workspace%%/index.cgi?action=recent_changes |  |
| wait_for_element_visible_ok | st-list-title | 30000 |
| text_like | Changes in Last |  |
| clickAndWait | link=All Pages |  |
| text_like | All Pages ( |  |

| *Comment* | Test Case: Calc What's New Sorting tests |

| click_and_wait | link=What's New |  |

| *Comment* | Test Case: Calc What's New Sorting Title ascending |
| select_and_wait | sort-picker | label=Title |
| text_like | st-recent_changes-content | qr/hey whatsnew %%start_time%% 0001.+hey whatsnew %%start_time%% 0004/ |

| *Comment* | Test Case: Calc What's New Sorting Title descending |
| select_and_wait | sort-picker | index=1 |
| text_like | st-recent_changes-content | qr/hey whatsnew %%start_time%% 0004.+hey whatsnew %%start_time%% 0001/ |

| open_ok | %%workspace%%/index.cgi?action=display;page_type=spreadsheet;page_name=hey whatsnew %%start_time%% 0005#edit |  |
| wait_for_element_visible_ok | st-save-button-link | 30000 |
| pause | 5000 | I hate pause; needed for entire page load |
| click_ok | st-save-button-link |  |

| clickAndWait | st-wiki-subnav-link-whats-new |  |
| text_like | st-recent_changes-content | qr/hey whatsnew %%start_time%% 0005.+hey whatsnew %%start_time%% 0004/ |

| *Comment* | Test Case: Calc What's New Sorting Date ascending |
| select_and_wait | sort-picker | index=3 |
| text_like | st-recent_changes-content | qr/hey whatsnew %%start_time%% 0004.+hey whatsnew %%start_time%% 0005/ |

| *Comment* | Test Case: Calc What's New Sorting Date descending |
| select_and_wait | sort-picker | index=3 |
| text_like | st-recent_changes-content | qr/hey whatsnew %%start_time%% 0003.+hey whatsnew %%start_time%% 0002/ |

| open_ok | /%%workspace%%/index.cgi?hey whatsnew %%start_time%% 0005 |  |
| click_ok | st-edit-button-link |  |
| wait_for_element_visible_ok | st-save-button-link | 30000 |
| pause | 5000 | I hate pause; needed for entire page load |
| click_and_wait | st-save-button-link |  |

| open_ok | /%%workspace%%/index.cgi?action=recent_changes |  |
| wait_for_element_visible_ok | st-list-title | 30000 |

| *Comment* | Test Case: Calc What's New Sorting Revisions descending |
| select_and_wait | sort-picker | index=4 |
| text_like | st-recent_changes-content | qr/hey whatsnew %%start_time%% 0005.+hey whatsnew %%start_time%% 0004/ |

| *Comment* | Test Case: Calc What's New Sorting Revisions ascending |
| select_and_wait | sort-picker | index=4 |
| text_like | st-recent_changes-content | qr/hey whatsnew %%start_time%% 0004.+hey whatsnew %%start_time%% 0005/ |

This test assumes that a certain date/time format is selected (Oct 3 12:34am)
but does not set up for that format. 
Remove the test until the the test setup enforces the format

text_like | qr/\w+ \d+ \d+:\d+\w+/ | |

| *Comment* | Test Case: Calc What's New delete page |

| st-admin | purge-page --w %%workspace%% --page hey_whatsnew_%%start_time%%_0004 | was purged |

| open_ok | /%%workspace%%/index.cgi?action=recent_changes |  |
| wait_for_element_visible_ok | st-list-title | 30000 |
| text_unlike | st-listview | hey whatsnew %%start_time%% 0004 |

| open_ok | /%%workspace%%/index.cgi?hey whatsnew %%start_time%% 0003 |  |
| click_and_wait | st-rewind-revision-count |  |
| text_like | st-page-title | All Revisions |
| text_unlike | st-revisionlist | Revision 2 |

 VerifyValue | Button | Compare Revisions |

| *Comment* | Test Case: Calc What's New Teardown |
| st-admin | purge-page --workspace %%workspace%% --page hey_whatsnew_%%start_time%%_0001 |  |
| st-admin | purge-page --workspace %%workspace%% --page hey_whatsnew_%%start_time%%_0002 |  |
| st-admin | purge-page --workspace %%workspace%% --page hey_whatsnew_%%start_time%%_0003 |  |
| st-admin | purge-page --workspace %%workspace%% --page hey_whatsnew_%%start_time%%_0005 |  |

| *Comment* | Test Case: Calc What's New COMPLETED |  |
