| *Comment* | Test Case: Group No Change Link |

* Fixture: SocialWidgets

| *Comment* | Test Case: Group No Change Link Define Users, Accounts |  |
| set | account | sj-acct-%%start_time%% |
| set | group | grp-%%start_time%% |
| set | user_short | sj%%start_time%% |
| set | user | %%user_short%%@matt.socialtext.net |
| set | joiner_short | jner%%start_time%% |
| set | joiner | %%joiner_short%%@matt.socialtext.net |

| set | ws | sj-ws-%%start_time%% |
| set | wstwo | sjtwo%%start_time%% |
| set | other_account | othr-acct-%%start_time%% |
| set | other_user | other-usr-%%start_time%%@matt.socialtext.net |
| set | public_group | pub-group-%%start_time%% |
| set | other_group | other-group-%%start_time%% |
| set | private_group | priv-group-%%start_time%% |
| set | other_priv_group | other-pg-%%start_time%% |

| *Comment* | Test Case: Group No Change Link CREATE users, accounts |  |
| st-admin | create-account --name %%account%% | was created |
| st-admin | create-user --email %%user%% --password %%password%% --account %%account%% | was created |
| st-admin | create-user --email %%joiner%% --password %%password%% --account %%account%% | was created |
| st-admin | create-account --name %%other_account%% | was created |
| st-admin | create-user --email %%other_user%% --password %%password%% --account %%other_account%% | was created |
| st-admin | create-workspace --n %%ws%% --t %%ws%% -account %%account%% | was created |
| st-admin | set-permissions --w %%ws%% --e %%user%% --p self-join | The permissions for the %%ws%% workspace have been changed to self-join |
| st-admin | add-workspace-admin --w %%ws%% --e %%user%% | now has the role of 'admin' in the |
| st-admin | create-workspace --n %%wstwo%% --t %%wstwo%% --account %%account%% | was created |
| st-admin | add-workspace-admin --w %%wstwo%% --e %%user%% | now has the role of 'admin' in the |  |

| *Comment* | Test Case: Group No Change Link Create A Self-Join Group |  |  |
| st-logoutin | %%user%% | %%password%% |  |
| create-group | %%other_group%% |  |
| set | other_group_id | %%group_id%% |
| st-admin | set-permissions --g %%other_group_id%% --p self-join | have been changed to self-join |
| st-admin | add-member --g %%other_group_id%% --e %%user%% | is now a member |
| st-admin | add-group-admin --g %%other_group_id%% --e %%user%% | is now a admin |
| st-admin | add-member --w %%ws%% --g %%other_group_id%% | now has the role of 'member' |
| st-create-group | %%public_group%% | public group | self-join-radio |

| *Comment* | Test Case: Group No Change Link Self-Join group opened for editing |  |
| st-name-widget | 1 | information_widget |
| st-widget-title-like | information_widget | Information |
| st-select-widget-frame | information_widget |  |
| text_like | //span[@id='permission-set'] | qr/self-join/ism |
| text_unlike | //span[@id='permission-set'] | qr/private/ism |
| text_like | Change |
| wait_for_element_visible_ok | permission-change | 30000 |
| select-frame | relative=parent |  |
| wait_for_element_visible_ok | create-group | 30000 |
| click_and_wait | create-group |  |
| get_id_from_url | first_group_id |  |

| *Comment* | Test Case: Group No Change Link Save Group, add workspace, no change link |  |
| st-admin | add-member --g %%first_group_id%% --w %%ws%% | now has the role of 'member' |
| refresh |  |  |
| st-name-widget | 1 | information_widget |
| st-select-widget-frame | information_widget |  |
| text_unlike | //span[@class='permissionType'] | qr/private/ism |
| text_like | //span[@class='permissionType'] | qr/self-join/ism |
| wait_for_element_not_present_ok | permission-change | 30000 |
| select-frame | relative=parent |  |

| *Comment* | Test Case: Group No Change Link Create Private Group |  |
| create-group | %%other_priv_group%% |  |
| set | other_priv_id | %%group_id%% |
| st-admin | add-member --g %%other_priv_id%% --e %%user%% | is now a member |
| st-admin | add-group-admin --g %%other_priv_id%% --e %%user%% | is now a admin |
| st-admin | add-member --w %%wstwo%% --g %%other_priv_id%% | now has the role of 'member' |
| st-create-group | %%private_group%% | private group | private-radio |
| wait_for_element_visible_ok | create-group | 30000 |
| click_and_wait | create-group |  |
| get_id_from_url | private_group_id |  |
| st-admin | add-member --w %%wstwo%% --g %%private_group_id%% | has the role of 'member' |
| refresh |  |  |
| st-name-widget | 1 | information_widget |
| st-widget-title-like | information_widget | Information |
| st-select-widget-frame | information_widget |  |
| text_like | //span[@class='permissionType'] | qr/private/ism |
| text_unlike | //span[@class='permissionType'] | qr/self-join/ism |
| wait_for_element_visible_ok | link=(Edit) | 30000 |
| select-frame | relative=parent |  |

| *Comment* | Test Case: Group No Change Link And Edit It |  |
| open_ok | /st/edit_group/%%other_priv_id%% |
| st-name-widget | 1 | information_widget |
| st-widget-title-like | information_widget | Information |
| st-select-widget-frame | information_widget |  |
| wait_for_element_not_present_ok | permission-change | 30000 |
| select-frame | relative=parent |  |

| *Comment* | Test Case: Group No Change Link TEARDOWN |  |
| st-admin | delete-workspace --w %%ws%% --no-export | has been deleted |
| st-admin | delete-workspace --w %%wstwo%% --no-export | has been deleted |
| delete-group | %%private_group_id%% |  |
| delete-group | %%first_group_id%% |  |
| delete-group | %%group_id%% |  |
| delete-group | %%other_group_id%% |  |
| delete-group | %%other_priv_id%% |  |

| *Comment* | Test Case: Group No Change Link COMPLETED |  |
