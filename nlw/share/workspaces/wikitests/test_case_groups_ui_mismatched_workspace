| *Comment* | Test Case: Groups UI mismatched Workspace |  |

* Fixture: SocialWidgets

| *Comment* | Test Case: Groups UI mismatched Workspace SETUP Workspaces |  |
| set | ws_private | ws-private-%%start_time%% |
| st-admin | create-workspace --name %%ws_private%% --title %%ws_private%% | was created |
| st-admin | add-workspace-admin --e %%username%% --w %%ws_private%% | now has the role of 'admin' |

| *Comment* | Test Case: Groups UI mismatched Workspace Create Self-join Group |  |  |
| set | group_self_join | grp-self-join-%%start_time%% |  |
| st-create-group | %%group_self_join%% | group description | self-join-radio |
| wait_for_element_visible_ok | create-group | 30000 |  |
| st-name-widget | 2 | workspaces_widget |  |
| st-select-widget-frame | workspaces_widget |  |  |
| wait_for_text_present_ok | At the moment, self-join groups can't have workspaces associated with them. We will be adding the ability to add workspaces to this group soon. | 30000 |  |
| select-frame | relative=parent |  |  |
| click_and_wait | create-group |  |  |

| *Comment* | Test Case: Groups UI mismatched Workspace Change group to private |  |
| st-name-widget | 1 | information_widget |
| st-select-widget-frame | information_widget |  |
| wait_for_element_visible_ok | link=(Edit) | 30000 |
| click_and_wait | link=(Edit) |  |
| wait_for_element_visible_ok | permission-change | 30000 |
| click_ok | permission-change |  |
| pause | 6000 |  |
| select-frame | relative=parent |  |
| wait_for_element_present_ok | st-create-group-next | 30000 |
| wait_for_element_present_ok | private-radio | 30000 |
| check_ok | private-radio |  |
| click_ok | st-create-group-next |  |
| pause | 6000 |  |
| st-name-widget | 1 | information_widget |
| st-select-widget-frame | information_widget |  |
| wait_for_text_present_ok | private | 30000 |
| select-frame | relative=parent |  |
| click_and_wait | create-group |  |
| st-name-widget | 1 | information_widget |
| st-select-widget-frame | information_widget |  |
| wait_for_element_visible_ok | link=(Edit) | 30000 |
| click_and_wait | link=(Edit) |  |
| select-frame | relative=parent |  |
| st-name-widget | 2 | workspaces_widget |
| st-select-widget-frame | workspaces_widget |  |
| wait_for_text_present_ok | Use the input above to select workspaces to associate with this group. You can only associate member-only workspaces with a private group. | 30000 |
| wait_for_element_present_ok | lookahead | 30000 |
| wait_for_element_present_ok | new_workspace | 30000 |
| select-frame | relative=parent |  |
| click_and_wait | create-group |  |

| *Comment* | Test Case: Groups UI mismatched Workspace SETUP Private Group becomes Self-join |  |  |
| st-create-group | %%group_self_join%% | group description | private-radio |
| wait_for_element_visible_ok | create-group | 30000 |  |
| click_and_wait | create-group |  |  |
| st-name-widget | 1 | information_widget |  |
| st-select-widget-frame | information_widget |  |  |
| wait_for_element_visible_ok | link=(Edit) | 30000 |  |
| click_ok | link=(Edit) |  |  |
| wait_for_element_visible_ok | permission-change | 30000 |  |
| click_ok | permission-change |  |  |
| pause | 6000 |  |  |
| select-frame | relative=parent |  |  |
| wait_for_element_present_ok | st-create-group-next | 30000 |  |
| wait_for_element_present_ok | self-join-radio | 30000 |  |
| check_ok | self-join-radio |  |  |
| click_ok | st-create-group-next |  |  |
| click_and_wait | create-group |  |  |
| st-name-widget | 1 | information_widget |  |
| st-select-widget-frame | information_widget |  |  |
| wait_for_element_visible_ok | link=(Edit) | 30000 |  |
| select-frame | relative=parent |  |  |
| st-name-widget | 2 | workspaces_widget |  |
| st-select-widget-frame | workspaces_widget |  |  |
| wait_for_text_present_ok | At the moment, self-join groups can't have workspaces associated with them. We will be adding the ability to add workspaces to this group soon. | 30000 |  |
| select-frame | relative=parent |  |  |
| click_and_wait | create-group |  |  |

| *Comment* | Test Case: Groups UI mismatched Workspace Private Group Does not show change button when a ws is added |  |
| get_id_from_url | new_group_id |  |
| st-admin | add-member --g %%new_group_id%% --w %%ws_private%% |  |
| open_ok | /st/group/%%new_group_ud%% |  |
| st-name-widget | 1 | information_widget |
| st-select-widget-frame | information_widget |  |
| wait_for_element_visible_ok | link=(Edit) | 30000 |
| click_and_wait | link=(Edit) | 30000 |
| wait_for_element_not_present_ok | permission-change | 30000 |
| text_like | //body | Currently, you cannot change a group's permission settings from private to self-join unless you remove the workspace associations first. |
| select-frame | relative=parent |  |

| *Comment* | Test Case: Groups UI mismatched Workspace Private Group throws warning when adding private group is fine |  |  |

| *Comment* | Test Case: Groups UI mismatched Workspace TEARDOWN |  |
