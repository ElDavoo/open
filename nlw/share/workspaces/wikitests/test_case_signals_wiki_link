* Fixture: SocialWidgets

| *Comment* | Test Case: Signals Wiki Link SETUP |  |

| set | text | Signals Link Text %%start_time%% |
| set | wiki | signals-wiki-%%start_time%% |
| set | title | Signals-Wiki-%%start_time%% |
| set | page | %%title%% |
| set | section | Signals-Section-%%start_time%% |

| st-admin | create-workspace --name %%wiki%% --title %%title%% | created |
| st-admin | add-member --workspace %%wiki%% --u %%username%% | now has the role |

| open_ok | /st/signals |  |

| *Comment* | Test Case: Signals Wiki Link buttons are present |  |
| st-name-widget | 1 | signals_widget |
| st-select-widget-frame | signals_widget |  |
| wait_for_element_visible_ok | mainInsertWikilink | 30000 |

| *Comment* | Test Case: Signals Wiki Link. Click Insert Wiki Link |  |
| click_ok | mainInsertWikilink |  |
| select-frame | relative=parent |  |

| *Comment* | Test Case: Signals Wiki Link. Verify visible elements |  |
| wait_for_element_visible_ok | //div[@id='wikilink-ui'] | 30000 |
| wait_for_element_visible_ok | //input[@name='label'] | 5000 |
| wait_for_element_visible_ok | //input[@name='workspace'] | 5000 |
| wait_for_element_visible_ok | //a[@class='btn done'] | 5000 |
| wait_for_element_visible_ok | //a[@class='btn cancel'] | 5000 |
| text_like | Choose a workspace then search for the wikipage you want linked. |  |

| *Comment* | Test Case: Signals Wiki Link. Click Cancel. Verify text is gone |  |
| click_ok | //a[@class='btn cancel'] |  |
| wait_for_text_not_present_ok | Choose a workspace then search for the wikipage you want linked. | 30000 |

| *Comment* | Test Case: Signals Wiki Link. Click Insert Again, re-verify |  |
| click_ok | mainInsertWikilink |  |
| select-frame | relative=parent |  |
| wait_for_element_visible_ok | //div[@id='wikilink-ui'] | 30000 |
| wait_for_element_visible_ok | //input[@name='label'] | 5000 |
| wait_for_element_visible_ok | //input[@name='workspace'] | 5000 |
| wait_for_element_visible_ok | //a[@class='btn done'] | 5000 |
| wait_for_element_visible_ok | //a[@class='btn cancel'] | 5000 |

| *Comment* | Test Case: Signals Web Link. Click WebLink Again. | *Comment* | Test Case: Signals Wiki Link setSpeed 3000 to allow for type-in |  |
| set_Speed | 3000 |  |
| type_ok | //input[@name='label'] | %%text%% |
| type_ok | //input[@name='workspace'] | %%wiki%% |
| wait_for_element_visible_ok | //input[@name='page'] | 5000 |
| wait_for_element_visible_ok | //input[@name='section'] | 5000 |
| type_ok | //input[@name='page'] | %%page%% |
| type_ok | //input[@name='section'] | %%section%% |

| *Comment* | Test Case: Signals Wiki Link setSpeed zero, click OK |  |
| set_Speed | 0 |  |
| click_ok | //a[@class='btn done'] | 5000 |
| wait_for_element_not_visible_ok | //div[@id='wikilink-ui'] | 5000 |

| *Comment* | Test Case: Signals Wiki Link post signal the hard way |  |
| st-select-widget-frame | signals_widget |  |
| wait_for_element_visible_ok | post | 5000 |
| click_ok | post |  |
| pause | 3000 |  |
| wait_for_element_visible_ok | link=%%text%% | 30000 |
| wait_for_element_visible_ok | //a[contains(@href,'#%%section%%')] | 30000 |
| select-frame | relative=parent |  |

| *Comment* | Test Case: Signals Wiki Link can't click the link since it has target="_new" |  |

| *Comment* | Test Case: Signals Wiki Link TEARDOWN |

| st-admin | delete-workspace --workspace %%wiki%% --no-export | deleted |

| *Comment* | Test Case: Signals Wiki Link COMPLETED |
