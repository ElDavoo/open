| *Comment* | Test Case: Signal Page To Group |

* Fixture: SocialWidgets

| *Comment* | Test Case: Signal Page To Group SETUP Account |  |
| set | group1 | signalpage-group1-%%start_time%% |
| set | group2 | signalpage-group2-%%start_time%% |
| set | acct | grpacct-%%start_time%% |
| st-admin | create-account --name %%acct%% | was created |

| *Comment* | Test Case: Signal Page To Group SETUP 2nd User, workspace |  |
| set | nonwsuser | nonwseuser%%start_time%%@matt.socialtext.net |
| set | ws | signalpage-%%start_time%% |
| st-admin | create-workspace --name %%ws%% --title %%ws%% --e %%nonwsuser%% --p %%password%% --account %%acct%% | was created |
| st-admin | add-member --e %%username%% --w %%ws%% | now has the role of |
| st-admin | create-user --e %%nonwsuser%% --p %%password%% | was created |  | *Comment* | Test Case: Signal Page To Group SETUP Groups |  |  |
| create-group | %%group1%% | %%acct%% | %%username%% |
| set | group1_id | %%group_id%% |  |
| create-group | %%group2%% | %%acct%% | %%username%% |
| set | group2_id | %%group_id%% |  |
| set | signalpage | Signal Page %%start_time%% |  |
| st-admin | update-page --w %%ws%% --e %%email%% --p "%%signalpage%%" < %%wikitest_client_files%%wikitest.txt | has been created |  |

a| *Comment* | Test Case: Signal Page To Group - click link then cancel | |
a | open_ok | /%%ws%%/index.cgi?%%signalpage%% | |
a | wait_for_element_visible_ok | st-signalthis-indicator | 30000 |
a | click_ok | st-signalthis-indicator | |
a | pause | 5000 | |
a | select-frame | st-signal-this-frame | |
a | wait_for_text_present_ok | Send a signal with a link to this page | 30000 |
a | wait_for_element_visible_ok | widget1_close | 30000 |
a | click_ok | widget1_close | |
a | wait_for_text_not_present_ok | Send a signal with a link to this page | 30000 |

| *Comment* | Test Case: Signal Page To Group - click link then send a signal |  |
| open_ok | /%%ws%%/index.cgi?%%signalpage%% |  |
| wait_for_element_visible_ok | st-signalthis-indicator | 30000 |
| click_ok | st-signalthis-indicator |  |
| pause | 5000 |  |
| select-frame | st-signal-this-frame |  |
| wait_for_text_present_ok | Send a signal with a link to this page | 30000 |
| st-send-page-signal | Check out this page; it's great: |  |

 *Comment* | Test Case: Signal Page To Group - do not see signal on signals page for %%acct%% | |
| wait_for_text_present_ok | Check out this page; it's great | 30000 |
| wait_for_text_present_ok | %%signalpage%% | 30000 |
| wait_for_element_visible_ok | link=%%signalpage%% | 30000 |
| set | blockingiosignal | blockingiosignal-%%start_time%% |
| st-send-signal-in-activities-widget | %%blockingiosignal%% | |

| *Comment* | Test Case: Signal Page To Group - Login as non-workspace member; do no see signal |  |
| st-logoutin | %%nonwsuser%% | %%password%% |
| open_ok | /st/signals |  |
| wait_for_text_present_ok | %%blockingiosignal%% | 30000 |
| wait_for_text_not_present_ok | Check out this page; it's great: | 30000 |
| text_unlike | //body | %%signalpage%% |

| *Comment* | Test Case: Signal Page To Group TBD: Signal to different groups within the widget |  |

| *Comment* | Test Case: Signal Page To Group TEARDOWN |  |
| delete-group | %%group2_id%% |  |
| delete-group | %%group1_id%% |  |
