| *Comment* | Test Case: Tools: Copy Page to Workspace |

| *Comment* | Test Case: Tools: Copy Page to Workspace. Create a target workspace |  |
| setSpeed | 100 |  |
| st-admin | create-workspace --name newspace_%%start_time%% --title newspace_%%start_time%% --account %%username%% |  |
| st-admin | add-member --email %%username%% --workspace newspace_%%start_time%% |  |

| *Comment* | Test Case: Tools: Copy Page to Workspace. Create a page and a tag to copy |  |
| click_and_wait | st-newpage-link |  |
| wait_for_element_visible_ok | link=Advanced | 10000 |
| click_ok | link=Advanced |  |
| wait_for_element_visible_ok | wikiwyg_wikitext_textarea | 10000 |
| type_ok | st-newpage-pagename-edit | copy_testpage_%%start_time%% |
| type_ok | wikiwyg_wikitext_textarea | copy_testpage_content_%%start_time%% |
| click_ok | st-edit-mode-tagbutton |  |
| type_ok | st-tagqueue-field | copy_tag_%%start_time%% |
| click_ok | st-tagqueue-submitbutton |  |
| click_ok | st-tagqueue-closebutton |  |
| click_and_wait | st-save-button-link |  |

| *Comment* | Test Case: Tools: Copy Page to Workspace. Test Copy popup, then copy the page |  |
| MouseOver | st-pagetools-tools |  |
| click_ok | link=Copy Page to Workspace |  |
| pause | 1000 |  |
| open_ok | /%%workspace%%/index.cgi?action=copy_to_workspace_popup;page_name=copy_testpage_%%start_time%% |  |
| wait_for_text_present_ok | Copy | 30000 |
| select_ok | target_workspace_id | label=newspace_%%start_time%% (newspace_%%start_time%%) |
| type_ok | new_title | newcopy_testpage_%%start_time%% |
| click_and_wait | Button |  |
| open_ok | /newspace_%%start_time%%/index.cgi?newcopy_testpage_%%start_time%% |  |
| text_like | st-page-maincontent | copy_testpage_content_%%start_time%% |
| text_like | st-tags | copy_tag_%%start_time%% |

| *Comment* | Test Case: Tools: Copy Page to Workspace. Create new content. |  |
| open_ok | /%%workspace%%/index.cgi?copy_testpage_%%start_time%% |  |
| click_ok | st-edit-button-link |  |
| wait_for_element_visible_ok | wikiwyg_wikitext_textarea | 10000 |
| type_ok | wikiwyg_wikitext_textarea | new_content_%%start_time%% |
| click_and_wait | st-save-button-link |  |

| *Comment* | Test Case: Tools: Copy Page to Workspace. Overwrite old page with new content. |  |
| open_ok | /%%workspace%%/index.cgi?action=copy_to_workspace_popup;page_name=copy_testpage_%%start_time%% |  |
| wait_for_text_present_ok | Copy | 30000 |
| select_ok | target_workspace_id | label=newspace_%%start_time%% (newspace_%%start_time%%) |
| type_ok | new_title | newcopy_testpage_%%start_time%% |
| click_and_wait | Button |  |
| text_like | qr/The new page name you selected, "newcopy_testpage_%%start_time%%", is already in use in workspace "newspace_%%start_time%%".+Please choose a different name.+If you are sure you wish to overwrite the "newcopy_testpage_%%start_time%%" page on "newspace_%%start_time%%", please press "Copy" again/ |  |
| click_and_wait | Button |  |

| *Comment* | Test Case: Tools: Copy Page to Workspace. Verify copy with new content. |  |
| open_ok | /newspace_%%start_time%%/index.cgi?newcopy_testpage_%%start_time%% |  |
| text_like | st-page-maincontent | new_content_%%start_time%% |
| text_like | st-tags | copy_tag_%%start_time%% |

| *Comment* | Test Case: Tools: Copy Page to Workspace. Single-space user cannot Copy |  |
| st-admin | create-user --email newuser_%%start_time%%@ken.socialtext.net --password 123456 |  |
| st-admin | add-member --email newuser_%%start_time%%@ken.socialtext.net --workspace newspace_%%start_time%% |  |
| st-logout |  |  |
| open_ok | /newspace_%%start_time%%/index.cgi?newcopy_testpage_%%start_time%% |  |
| type_ok | username | newuser_%%start_time%%@ken.socialtext.net |
| type_ok | password | 123456 |
| click_and_wait | //input[@value='Log in'] |  |
| *Comment* | Test Case: Tools: Copy Page to Workspace. User has no copy to workspace menu item. |  |
| text_unlike | //body | Copy Page to Workspace |

| *Comment* | Test Case: Tools: Copy Page to Workspace Teardown |  |
| st-logoutin |  |  |
| open_ok | /%%workspace%%/index.cgi?copy_testpage_%%start_time%% |  |
| click_and_wait | link=Delete Page |  |
| confirmation_like | Are you sure you want to delete this page? |  |
| st-admin | delete-workspace --workspace newspace_%%start_time%% --no-export |  |

| *Comment* | Test Case: Tools: Copy Page to Workspace COMPLETED |
