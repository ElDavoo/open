| *Comment* | Test Case: Tools: Copy Page to Workspace |

| *Comment* | Test Case: Tools: Copy Page to Workspace. Create a target workspace |  |
| setSpeed | 100 |  |
| st-admin | create-workspace --name newspace-%%start_time%% --title "newspace %%start_time%%" --account %%username%% |  |
| st-admin | add-member --email %%username%% --workspace newspace-%%start_time%% |  |

| *Comment* | Test Case: Tools: Copy Page to Workspace. Create a page and a tag to copy |  |
| click_and_wait | st-newpage-link |  |
| wait_for_element_visible_ok | link=Advanced | 30000 |
| click_ok | link=Advanced |  |
| wait_for_element_visible_ok | wikiwyg_wikitext_textarea | 30000 |
| type_ok | st-newpage-pagename-edit | Copy Page %%start_time%% |
| type_ok | wikiwyg_wikitext_textarea | Copy Page Content %%start_time%% |
| click_ok | st-edit-mode-tagbutton |  |
| type_ok | st-tagqueue-field | Copy Tag %%start_time%% |
| click_ok | st-tagqueue-submitbutton |  |
| click_ok | st-tagqueue-closebutton |  |
| click_and_wait | st-save-button-link |  |

| *Comment* | Test Case: Tools: Copy Page to Workspace. Test Copy popup, then copy the page |  |
| MouseOver | st-pagetools-tools |  |
| click_ok | link=Copy Page to Workspace |  |
| pause | 1000 |  |
| open_ok | /%%workspace%%/index.cgi?action=copy_to_workspace_popup;page_name=copy_page_%%start_time%% |  |
| wait_for_text_present_ok | Copy | 30000 |
| select_ok | target_workspace_id | label=newspace %%start_time%% (newspace-%%start_time%%) |
| type_ok | new_title | New Copy Page %%start_time%% |
| click_ok | Button |  |
| *Comment* | Test Case: Tools: Copy Page to Workspace. Verify copy by opening target wiki Dashboard and clicking What's New link to allow time for copy to complete |  |
| open_ok | /newspace-%%start_time%% |  |
| click_and_wait | st-home-link |  |
| click_and_wait | link=New Copy Page %%start_time%% |  |
| *Comment* | /newspace-%%start_time%%/index.cgi?new_copy_page_%%start_time%% |  |
| text_like | st-page-maincontent | Copy Page Content %%start_time%% |
| text_like | st-tags | Copy Tag %%start_time%% |

| *Comment* | Test Case: Tools: Copy Page to Workspace. Create new content. |  |
| open_ok | /%%workspace%%/index.cgi?copy_page_%%start_time%% |  |
| click_ok | st-edit-button-link |  |
| wait_for_element_visible_ok | wikiwyg_wikitext_textarea | 10000 |
| type_ok | wikiwyg_wikitext_textarea | New Content %%start_time%% |
| click_and_wait | st-save-button-link |  |

| *Comment* | Test Case: Tools: Copy Page to Workspace. Overwrite old page with new content. |  |
| open_ok | /%%workspace%%/index.cgi?action=copy_to_workspace_popup;page_name=copy_page_%%start_time%% |  |
| wait_for_text_present_ok | Copy | 10000 |
| select_ok | target_workspace_id | label=newspace %%start_time%% (newspace-%%start_time%%) |
| type_ok | new_title | New Copy Page %%start_time%% |
| click_ok | Button |  |
| pause | 5000 |  |
| text_like | //body | The new page name you selected, "New Copy Page %%start_time%%", is
already in use in workspace "newspace-%%start_time%%" |
| click_ok | Button |  |
| pause | 5000 |  |

| *Comment* | Test Case: Tools: Copy Page to Workspace. Verify overwrite by opening target
wiki Dashboard and clicking What's New link to allow time for copy to
complete |  |
| open_ok | /newspace-%%start_time%% |  |
| click_and_wait | st-home-link |  |
| click_and_wait | link=New Copy Page %%start_time%% |  |
| text_like | st-page-maincontent | New Content %%start_time%% |
| text_like | st-tags | Copy Tag %%start_time%% |

| *Comment* | Test Case: Tools: Copy Page to Workspace. Single-space user cannot Copy |  |
| st-admin | create-user --email newuser_%%start_time%%@ken.socialtext.net --password 123456 |  |
| st-admin | add-member --email newuser_%%start_time%%@ken.socialtext.net --workspace newspace-%%start_time%% |  |
| st-logout |  |  |
| open_ok | /newspace-%%start_time%%/index.cgi?new_copy_page_%%start_time%% |  |
| type_ok | username | newuser_%%start_time%%@ken.socialtext.net |
| type_ok | password | 123456 |
| click_and_wait | //input[@value='Log in'] |  |
| *Comment* | Test Case: Tools: Copy Page to Workspace. User has no copy to workspace menu item. |  |
| text_unlike | //body | Copy Page to Workspace |

| *Comment* | Test Case: Tools: Copy Page to Workspace Teardown |  |
| st-admin | purge-page --w %%workspace%% --page copy_page_%%start_time%% | was purged |
| st-admin | delete-workspace --workspace newspace-%%start_time%% --no-export |  |

| *Comment* | Test Case: Tools: Copy Page to Workspace COMPLETED |
