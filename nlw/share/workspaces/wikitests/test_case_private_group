| *Comment* | Test Case: Private Group |  |

* Fixture: SocialWidgets

| *Comment* | Test Case: Private Group SETUP |  |
| set | acct | private-acct-%%start_time%% |
| set | user1_short | privuser1%%start_time%% |
| set | user2_short | privuser2%%start_time%% |

| set | user1 | %%user1_short%%@matt.socialtext.net |
| set | user2 | %%user2_short%%@matt.socialtext.net |
| set | group_name | group%%start_time%% |
| set | group_desc | group%%start_time%% |
| st-admin | create-account --name %%acct%% | was created |
| st-admin | create-user --e %%user1%% --p %%password%% | was created |
| st-admin | create-user --e %%user2%% --p %%password%% | was created |

| *Comment* | Test Case: Private Group Setup |  |  |
| st-logoutin | %%user1%% | %%password%% |  |
| st_create_group | %%group_name%% | %%group_desc%% | private-radio |
| wait_for_element_visible_ok | create-group | 30000 |  |
| click_and_wait | create-group |  |  |
| get_id_from_url | group_id |  |  |
| st-admin | add-member --e %%user2%% --g %%group_id%% | is now a member of | %%group_name%% |
| open_ok | /st/dashboard |  |  |

| *Comment* | Test Case: Private Group Login as group member %%user2%% - leave/cancel |  |
| st-logoutin | %%user2%% | %%password%% |
| st_open_noeval | /st/group/%%group_id%% |  |
| wait_for_element_visible_ok | st-leave-group |  |
| click_ok | st-leave-group |  |
| wait_for_element_visible_ok | st-lightbox-cancel-leave-group | 30000 |
| wait_for_element_visible_ok | st-lightbox-leave-group | 30000 |
| text_like | //body | This action cannot be undone. Are you sure you'd like to leave this group? |
| setSpeed | 5000 |  |
| click_ok | st-lightbox-cancel-leave-group |  |
| st-name-widget | 4 | members_widget |
| setSpeed | 0 |  |
| st-select-widget-frame | members_widget |  |
| text_like | //body | %%user1_short%% |
| text_like | //body | %%user2_short%% |
| select-frame | relative=parent |  |

| *Comment* | Test Case: Private Group Login as group member %%user2%% - leave/ok |  |
| open_ok | /st/dashboard |  |
| st-logoutin | %%user2%% | %%password%% |
| open_ok | /st/group/%%group_id%% |  |
| wait_for_element_visible_ok | st-leave-group |  |
| click_ok | st-leave-group |  |
| wait_for_element_visible_ok | st-lightbox-cancel-leave-group | 30000 |
| wait_for_element_visible_ok | st-lightbox-leave-group | 30000 |
| text_like | //body | This action cannot be undone. Are you sure you'd like to leave this group? |
| click_ok | st-lightbox-leave-group |  |
| pause | 15000 | click_and_wait_fails; nothing to 'hold on' to |
| st_open_noeval | /st/group/%%group_id%% | FALSE ERROR; it's okay, really |
| wait_for_element_not_present_ok | st-leave-group | 30000 |
| wait_for_element_not_present_ok | st-join-group | 30000 |
| text_like | //body | The group you are trying to view does not exist. Please check with the group administrator or contact Socialtext Support. |

| *Comment* | Test Case: Private Group TEARDOWN |  |
| delete-group | %%group_id%% |  |
| *Comment* | Test Case: Private Group COMPLETED |  |
