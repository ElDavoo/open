| *Comment* | START Test Case: Sidebar: Recently Viewed |  |

 be sure a number of recent viewings have occurred | | view some pages as needed

| *Comment* | Test Case: Sidebar: Recently Viewed. Set up test data |  |

| open_ok | /%%workspace%%/index.cgi?action=new_page |  |
| wait_for_element_visible_ok | link=Advanced | 10000 |
| click_ok | link=Advanced |  |
| type_ok | st-newpage-pagename-edit | tc_sidebar_recently_viewed_1_%%start_time%% |
| wait_for_element_visible_ok | wikiwyg_wikitext_textarea | 10000 |
| type_ok | wikiwyg_wikitext_textarea | tc_sidebar_recently_viewed_1_%%start_time%% |
| clickAndWait | st-save-button-link |  |

| open_ok | /%%workspace%%/index.cgi?action=new_page |  |
| wait_for_element_visible_ok | link=Advanced | 10000 |
| click_ok | link=Advanced |  |
| type_ok | st-newpage-pagename-edit | tc_sidebar_recently_viewed_2_%%start_time%% |
| wait_for_element_visible_ok | wikiwyg_wikitext_textarea | 10000 |
| type_ok | wikiwyg_wikitext_textarea | tc_sidebar_recently_viewed_2_%%start_time%% |
| clickAndWait | st-save-button-link |  |

| open_ok | /%%workspace%%/index.cgi?action=new_page |  |
| wait_for_element_visible_ok | link=Advanced | 10000 |
| click_ok | link=Advanced |  |
| type_ok | st-newpage-pagename-edit | tc_sidebar_recently_viewed_3_%%start_time%% |
| wait_for_element_visible_ok | wikiwyg_wikitext_textarea | 10000 |
| type_ok | wikiwyg_wikitext_textarea | tc_sidebar_recently_viewed_3_%%start_time%% |
| clickAndWait | st-save-button-link |  |

 "Settings -> Screen Layout"<http://> | screen layout UI appears
 check "Include Recently Viewed items as a side box when viewing pages?" checkbox. Save. | settings take effect.

| *Comment* | Test Case: Sidebar: Recently Viewed Change screen layout to show breadcrumbs |  |

| clickAndWait | link=Settings |  |
| clickAndWait | link=Screen Layout |  |
| check_ok | display__include_breadcrumbs |  |
| clickAndWait | Button |  |

 Visit any page. Open the sidebar | Sidebar contains recently viewed section
 Observe values in sidebar | Sidebar contains list of most recently viewed pages in most recently viewed order

| *Comment* | Test Case: Sidebar: Recently Viewed. Sidebar |  |
| open_ok | /%%workspace%%/?tc_sidebar_recently_viewed_3_%%start_time%% |  |
| text_like | link=tc_sidebar_recently_viewed_1_%%start_time%% | tc_sidebar_recently_viewed_1_%%start_time%% |
| text_like | link=tc_sidebar_recently_viewed_2_%%start_time%% | tc_sidebar_recently_viewed_2_%%start_time%% |

| *Comment* | Test Case: Sidebar: Recently Viewed validate sorting |  |
| text_like | qr/viewed_2_%%start_time%%.+viewed_1_%%start_time%%/ |  |

 "What's New,"<http://> then Recently Viewed tab | same list appears in same order

| *Comment* | Test Case: Sidebar: Recently Viewed. list view |  |
| open_ok | /%%workspace%%/index.cgi?action=recent_changes |  |
| clickAndWait | link=Recently Viewed |  |
| text_like | link=tc_sidebar_recently_viewed_1_%%start_time%% | tc_sidebar_recently_viewed_1_%%start_time%% |
| text_like | link=tc_sidebar_recently_viewed_2_%%start_time%% | tc_sidebar_recently_viewed_2_%%start_time%% |
| text_like | qr/viewed_2_%%start_time%%.+viewed_1_%%start_time%%/ |  |

 visit several pages | Recently Viewed list changes in sidebar to track viewed pages
 "What's New,"<http:///> then Recently Viewed tab | same list appears in same order

| *Comment* | Test Case: Sidebar: Recently Viewed. Visit several pages |  |
| open_ok | /%%workspace%%/?Announcements and Links |  |
| clickAndWait | link=tc_sidebar_recently_viewed_3_%%start_time%% |  |

| *Comment* | Test Case: Sidebar: Recently Viewed Visit A&L again to force Sidebar update |  |
| open_ok | /%%workspace%%/?Announcements and Links |  |
| text_like | link=tc_sidebar_recently_viewed_1_%%start_time%% | tc_sidebar_recently_viewed_1_%%start_time%% |
| text_like | link=tc_sidebar_recently_viewed_2_%%start_time%% | tc_sidebar_recently_viewed_2_%%start_time%% |
| text_like | qr/viewed_3_%%start_time%%.+Announcements.+viewed_2_%%start_time%%.+viewed_1_%%start_time%%/ |  |

 "Settings -> Screen Layout"<http:///> | screen layout UI appears
 uncheck "Include Recently Viewed items as a side box when viewing pages?" checkbox. Save. | settings take effect.
 Visit any page. Open the sidebar | Sidebar *DOES NOT* contain recently viewed section

| *Comment* | Test Case: Sidebar: Recently Viewed. uncheck sidebar |  |
| open_ok | /%%workspace%%/index.cgi?action=users_settings |  |
| clickAndWait | link=Screen Layout |  |
| uncheck_ok | display__include_breadcrumbs |  |
| clickAndWait | Button |  |
| open_ok | /%%workspace%%/?tc_sidebar_recently_viewed_3_%%start_time%% |  |
| wait_for_element_not_present_ok | st-breadcrumbs-title | 2000 |

| *Comment* | Test Case: Sidebar: Recently Viewed. Teardown |  |
| clickAndWait | link=Delete Page |  |
| confirmation_like | Are you sure you want to delete this page? |  |
| open_ok | /%%workspace%%/?tc_sidebar_recently_viewed_2_%%start_time%% |  |
| clickAndWait | link=Delete Page |  |
| confirmation_like | Are you sure you want to delete this page? |  |
| open_ok | /%%workspace%%/?tc_sidebar_recently_viewed_1_%%start_time%% |  |
| clickAndWait | link=Delete Page |  |
| confirmation_like | Are you sure you want to delete this page? |  |

| *Comment* | Test Case: Sidebar: Recently Viewed COMPLETED |  |
