| *Comment* | Test case: Recent Changes Widget |  |

* Fixture: SocialWidgets

| *Comment* | Test case: Recent Changes Widget Create a new page |  |
| open_ok | /test-data/index.cgi?action=new_page |  |
| wait_for_element_present_ok | st-newpage-pagename-edit |  |
| wait_for_element_present_ok | wikiwyg_wikitext_textarea |  |
| type_ok | st-newpage-pagename-edit | Recent Changes Widget %%start_time%% |
| wait_for_element_visible_ok | link=Advanced | 10000 |
| click_ok | link=Advanced |  |
| wait_for_element_visible_ok | wikiwyg_wikitext_textarea | 10000 |
| type_ok | wikiwyg_wikitext_textarea | I have created a page called recent_changes_widget_%%start_time%%. woot. |
| click_ok | st-save-button-link |  |
| wait_for_element_present_ok | st-edit-button-link | 25000 |

| set | workspace | test-data |
| open_ok | /?dashboard | 60000 |
| st-empty-container |  |  |
| st-add-widget | gadgets/share/gadgets/recent_changes.xml | recentchanges |
| st_wait_for_widget_load | recentchanges | 15000 |
| st-widget-title-like | recentchanges | All Changes |
| st-select-widget-frame | recentchanges |  |
| wait_for_text_present_ok | I have created a page called recent_changes_widget_%%start_time%%. woot. | 30000 |
| wait_for_element_present_ok | link=Recent Changes Widget %%start_time%% |  |

| *Comment* | Test case: Recent Changes Widget Add A Bunch of new pages |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_01 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_02 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_03 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_04 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_05 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_07 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_08 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_09 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_10 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_11 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_12 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_13 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_14 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_15 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_16 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_17 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_18 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_19 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_20 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_21 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_22 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_23 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_24 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_25 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_26 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| st-admin | update-page --workspace test-data --page recent_changes_%%start_time%%_27 < %%wikitest_client_files%%wikitest.txt --username %%username%% |  |
| select-frame | relative=parent |  |

| *Comment* | Test case: Recent Changes Widget Test the new pages and the pagecount selectability |  |
| select_ok | up_count | 20 |
| click_ok | st-savebutton |  |
| st-select-widget-frame | recentchanges |  |
| wait_for_text_present_ok | recent_changes_%%start_time%%_27 | 20000 |
| wait_for_text_present_ok | recent_changes_%%start_time%%_25 | 3000 |
| wait_for_text_present_ok | recent_changes_%%start_time%%_20 | 2000 |
| wait_for_text_present_ok | recent_changes_%%start_time%%_10 | 1000 |
| wait_for_text_present_ok | recent_changes_%%start_time%%_09 | 500 |
| pause | 60000 |
| text_unlike | //body | recent_changes_%%start_time%%_02 |
| text_unlike | //body | I have created a page called one_page_%%start_time%%. woot. |
| text_unlike | //body | one page %%start_time%% |
| select-frame | relative=parent |  |
| select_ok | up_count | 5 |
| click_ok | st-savebutton |  |
| st-select-widget-frame | recentchanges |  |
| wait_for_text_present_ok | recent_changes_%%start_time%%_27 | 20000 |
| wait_for_text_present_ok | recent_changes_%%start_time%%_26 | 3000 |
| wait_for_text_present_ok | recent_changes_%%start_time%%_25 | 2000 |
| wait_for_text_present_ok | recent_changes_%%start_time%%_24 | 1000 |
| wait_for_text_present_ok | recent_changes_%%start_time%%_23 | 1000 |
| text_unlike | //body | recent_changes_%%start_time%%_22 |
| text_unlike | //body | recent_changes_%%start_time%%_21 |
| text_unlike | //body | recent_changes_%%start_time%%_20 |
| text_unlike | //body | recent_changes_%%start_time%%_19 |
| text_unlike | //body | recent_changes_%%start_time%%_18 |
| text_unlike | //body | recent_changes_%%start_time%%_01 |
| text_unlike | //body | one page %%start_time%% |
| select-frame | relative=parent |  |

| *Comment* | Test case: Recent Changes Widget Teardown |
| st-admin | purge-page --workspace test-data --page recent_changes_widget_%%start_time%% |  |
| st-admin | purge-page --workspace test-data --page one_page_%%start_time%% |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_01 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_02 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_03 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_04 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_05 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_06 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_07 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_08 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_09 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_10 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_11 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_12 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_13 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_14 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_15 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_16 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_17 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_18 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_19 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_20 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_21 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_22 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_23 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_24 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_25 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_26 |
| st-admin | purge-page --workspace test-data --page recent_changes_%%start_time%%_27 |

| *Comment* | Test case: Recent Changes Widget COMPLETED |
