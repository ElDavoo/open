| *Comment* | Test Case: Activities Widget Verify Main User. Get a fresh Activities widget |  |
| open_ok | /?dashboard | 60000 |
| st-empty-container |  |  |
| wait_for_element_visible_ok | link=Add Content | 30000 |
| click_and_wait | link=Add Content |  |
| wait_for_element_visible_ok | //a[@id='gallery-widget-Activities'] | 30000 |
| click_and_wait | //a[@id='gallery-widget-Activities'] |  |

| *Comment* | Test Case: Activities Widget Verify Main User. Back at Dashboard with widget |  |
| wait_for_text_present_ok | Welcome | 30000 |
| text_like | st-editing-tools-edit | Welcome |
| wait_for_text_present_ok | Activities | 30000 |
| st-name-widget | 1 | activities_widget |
| st-widget-title-like | activities_widget | Activities |
| st-select-widget-frame | activities_widget |  |

| *Comment* | Test Case: Activities Widget Verify Main User. Signals in widget. Select signals. |  |
| wait_for_element_visible_ok | action | 10000 |
| select_ok | action | label=signals |
| is_selected_ok | action | label=signals |

| *Comment* | Test Case: Activities Widget Verify Main User. select_and_wait in iframe doesn't work. Use pause. |  |
| pause | 10000 | I hate pause |
| wait_for_text_present_ok | She rocks in the treehouse %%start_time%% | 30000 |
| wait_for_text_present_ok | Rockin and a bopin %%start_time%% | 30000 |
| wait_for_text_present_ok | All the little birds %%start_time%% | 30000 |
| wait_for_text_present_ok | Love to hear the robin going %%start_time%% | 30000 |
| wait_for_text_present_ok | Signal %%start_time%% | 30000 |
| text_like | //body | qr/Super.+Edit.+Summary.+From.+Signal.+%%start_time%%/ |
| select-frame | relative=parent |  |

| *Comment* | Test case: Activities Widget. Wait for Signal to appear in Profile Activity |  |
| click_and_wait | link=Profile |  |
| wait_for_text_present_ok | Activity | 30000 |
| st-name-widget | 4 | profile_activity |
| st-select-widget-frame | profile_activity |  |

| wait_for_text_present_ok | She rocks in the treehouse %%start_time%% | 120000 |
| wait_for_text_present_ok | Rockin and a bopin %%start_time%% | 120000 |
| wait_for_text_present_ok | All the little birds %%start_time%% | 120000 |
| wait_for_text_present_ok | Love to hear the robin going %%start_time%% | 120000 |
| wait_for_text_present_ok | Signal %%start_time%% | 120000 |
| text_like | //body | qr/Super.+Edit.+Summary.+From.+Signal.+%%start_time%%/ |

| *Comment* | Test Case: Activities widget. Wait for automatic refresh to one minute ago in Activity |  |
| wait_for_text_present_ok | one minute ago | 120000 |
| select-frame | relative=parent |  |

| *Comment* | Test case: Activities Widget. Check Dashboard, then wait for auto refresh |  |
| open_ok | / |  |
| wait_for_text_present_ok | Welcome | 30000 |
| text_like | st-editing-tools-edit | Welcome |
| wait_for_text_present_ok | Activities | 30000 |
| st-name-widget | 1 | activities_widget |
| st-widget-title-like | activities_widget | Activities |
| st-select-widget-frame | activities_widget |  |

| *Comment* | Test case: Activities Widget. Signals should still be there |  |
| is_selected_ok | action | label=signals |
| wait_for_text_present_ok | She rocks in the treehouse %%start_time%% | 10000 |
| wait_for_text_present_ok | Rockin and a bopin %%start_time%% | 10000 |
| wait_for_text_present_ok | All the little birds %%start_time%% | 10000 |
| wait_for_text_present_ok | Love to hear the robin going %%start_time%% | 10000 |
| wait_for_text_present_ok | Signal %%start_time%% | 10000 |
| text_like | //body | qr/Super.+Edit.+Summary.+From.+Signal.+%%start_time%%/ |

| *Comment* | Test case: Activities Widget. wait for auto refresh to two minutes ago |  |
| wait_for_text_present_ok | 2 minutes ago | 120000 |
| select-frame | relative=parent |  |

| *Comment* | Test case: Activities Widget. check for agreement with Signals page |  |
| click_and_wait | link=Signals |  |

| wait_for_element_present_ok | //iframe[@name='widget_2'] | 30000 |
| st-name-widget | 3 | signal_activity |
| st-select-widget-frame | signal_activity |  |

| wait_for_text_present_ok | She rocks in the treehouse %%start_time%% | 10000 |
| wait_for_text_present_ok | Rockin and a bopin %%start_time%% | 10000 |
| wait_for_text_present_ok | All the little birds %%start_time%% | 10000 |
| wait_for_text_present_ok | Love to hear the robin going %%start_time%% | 10000 |
| wait_for_text_present_ok | Signal %%start_time%% | 10000 |
| text_like | //body | qr/Super.+Edit.+Summary.+From.+Signal.+%%start_time%%/ |
