| *Comment* | Test case: Business Control Panel Account Google Analytics |  |

| st-admin | give-accounts-admin --email %%email%% | %%username%% now has accounts admin access |

| set | acct | GAacct%%start_time%% |
| st-admin | create-account --name %%acct%% | A new account named "%%acct%%" was created |
| set | gaid | UA-20106506-1 |


| *Comment* | Test case: Business Control Panel Account Account Google Analytics Set an account via st-admin |  |
| set | cmdlineacct | GACMDacct%%start_time%% |
| st-admin | create-account --name %%cmdlineacct%% | A new account named "%%cmdlineacct%%" was created |
| st-admin | enable-plugin --plugin analytics --account %%cmdlineacct%% |  |
| st-admin | set-google-analytics --account %%cmdlineacct%% --code UA-20106506-1 |  |
| st-admin | show-google-analytics --account %%cmdlineacct%% | UA-20106506-1 |

| *Comment* | Test case: Business Control Panel Account Account Google Analytics See st-admin commands in CP |  |
| open_ok | /nlw/control/account |  |
| wait_for_element_visible_ok | st-search-by-name | 30000 |
| type_ok | st-search-by-name | %%cmdlineacct%% |
| wait_for_element_visible_ok | st-submit-search-by-name | 30000 |
| click_and_wait | st-submit-search-by-name |  |
| wait_for_element_visible_ok | link=%%cmdlineacct%% | 30000 |
| click_and_wait | link=%%cmdlineacct%% |  |
| wait_for_element_visible_ok | analytics-prefs-submit | 30000 |
| wait_for_element_visible_ok | ga_id | 30000 |
| verifyValue | ga_id | %%gaid%% |


| *Comment* | Test case: Business Control Panel Account Account NOW do it all through CP |  |
| st-admin | disable-plugin --plugin analytics --account %%acct%% |  |  |
| open_ok | /nlw/control/account |  |
| wait_for_element_visible_ok | st-search-by-name | 30000 |
| type_ok | st-search-by-name | %%acct%% |
| wait_for_element_visible_ok | st-submit-search-by-name | 30000 |
| click_and_wait | st-submit-search-by-name |  |
| wait_for_element_visible_ok | link=%%acct%% | 30000 |
| click_and_wait | link=%%acct%% |  |

| *Comment* | Test case: Business Control Panel Account Account Google Analytics See initially disabled |  |
| wait_for_element_not_present_ok | ga_id | 30000 |
| wait_for_element_not_present_ok | analytics-prefs-submit | 30000 |
| wait_for_element_not_present_ok | ga_domains | 30000 |
| text_like | Google Analytics (click to enable) |  |
| wait_for_element_visible_ok | toggle_plugin_analytics | 30000 |

| *Comment* | Test case: Business Control Panel Account Account Google Analytics Enable the plugin |  |
| click_ok | toggle_plugin_analytics |  |
| wait_for_element_visible_ok | ga_id | 30000 |
| wait_for_element_visible_ok | analytics-prefs-submit | 30000 |
| wait_for_element_visible_ok | ga_domains | 30000 |
| wait_for_element_visible_ok | st-multiple-domains | 30000 |
| wait_for_element_visible_ok | st-single-domain | 30000 |
| wait_for_element_visible_ok | st-multiple-domains | 30000 |
| type_ok | ga_id | %%gaid%% |
| click_ok | st-multiple-subdomains |  |
| click_ok | analytics-prefs-submit |  |
| wait_for_text_present_ok | Done | 30000 |
| wait_for_text_present_ok | Google Analytics (click to disable) | 30000 |

| *Comment* | Test case: Business Control Panel Account Account Google Analytics Re-Find Account, Confirm Values |  |
| open_ok | /nlw/control/account |  |
| wait_for_element_visible_ok | st-search-by-name | 30000 |
| type_ok | st-search-by-name | %%acct%% |
| wait_for_element_visible_ok | st-submit-search-by-name | 30000 |
| click_and_wait | st-submit-search-by-name |  |
| wait_for_element_visible_ok | link=%%acct%% | 30000 |
| click_and_wait | link=%%acct%% |  |
| wait_for_element_visible_ok | analytics-prefs-submit | 30000 |
| wait_for_element_visible_ok | ga_id | 30000 |
| verifyValue | ga_id | %%gaid%% |
| wait_for_element_visible_ok | st-multiple-domains | 30000 |
| wait_for_element_visible_ok | st-multiple-subdomains | 30000 |
| wait_for_element_visible_ok | st-single-domain | 30000 |
| is_checked_ok | st-multiple-subdomains |  |
| wait_for_text_present_ok | Google Analytics (click to disable) | 30000 |

| *Comment* | Test case: Business Control Panel Account Account Google Analytics Disable analytics, refresh, see disabled |  |
| wait_for_element_visible_ok | toggle_plugin_analytics | 30000 |
| click_ok | toggle_plugin_analytics |  |
| wait_for_text_present_ok | Google Analytics (click to enable) | 30000 |
| open_ok | /nlw/control/account |  |
| wait_for_element_visible_ok | st-search-by-name | 30000 |
| type_ok | st-search-by-name | %%acct%% |
| wait_for_element_visible_ok | st-submit-search-by-name | 30000 |
| click_and_wait | st-submit-search-by-name |  |
| wait_for_element_visible_ok | link=%%acct%% | 30000 |
| click_and_wait | link=%%acct%% |  |
| wait_for_element_not_present_ok | ga_id | 30000 |
| wait_for_element_not_present_ok | analytics-prefs-submit | 30000 |


| *Comment* | Test case: Business Control Panel Account Account Google Analytics COMPLETED |  |
