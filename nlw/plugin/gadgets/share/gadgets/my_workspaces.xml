<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="My Workspaces">
  <Require feature="dynamic-height" />
  <Require feature="socialtext" />
  </ModulePrefs>
  <Content type="html">
    <![CDATA[
        <style type="text/css">
            .ws-views__MODULE_ID__ { color: #0e93d8; text-align: right; }
            .ws-contrib__MODULE_ID__ { color: #093; text-align: right; }
        </style>

        <div class='calendarList'>
            <table id="__MODULE_ID__-table">
                <tr>
                    <td>&nbsp;</td>
                    <td class="ws-views__MODULE_ID__">views</td>
                    <td style="padding-right: 10px" 
                        class="ws-contrib__MODULE_ID__">contributions</td>
                </tr>
            </table>
        </div>
<script>
    jQuery.getJSON( '/webplugin/cgi/reports/report.cgi/user_workspace_usage/now/-1month.json', { }, function ( data ) {
        for (var i=0; i<data.length; i++) {
            var ws_name = data[i][0];
            var ws_title = data[i][1];
            var ws_views = data[i][2];
            var ws_contrib = data[i][3];
            jQuery('#__MODULE_ID__-table').append(
                jQuery('<tr>').append(
                    jQuery('<td style="padding-left: 10px;">').append(
                        jQuery('<a target="_top">').attr('href','/'+ws_name).append(ws_title)
                    )
                ).append(
                    jQuery('<td>').attr('class','ws-views__MODULE_ID__')
                        .append( ws_views + '' )
                ).append(
                    jQuery('<td style="padding-right: 10px;">').attr('class','ws-contrib__MODULE_ID__')
                        .append( ws_contrib + '' )
                )
            )
        }
        jQuery('#__MODULE_ID__ .border:last').remove();
        jQuery('#__MODULE_ID__-table tr:odd').addClass('oddRow');
        gadgets.window.adjustHeight();
    });
</script>
    ]]>
  </Content>
</Module>
